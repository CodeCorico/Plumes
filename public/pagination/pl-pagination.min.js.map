{"version":3,"sources":["pagination/pl-pagination.js"],"names":["window","Ractive","controller","component","data","el","config","done","_updatePages","pages","totalPages","parseInt","Pagination","get","pageSelected","displayPagesCount","selectIndex","Math","round","start","max","stop","min","i","push","toString","set","refs","displayFirstButton","displayLastButton","displayPreviousButton","displayNextButton","$","each","key","value","plName","observe","newValue","setTimeout","onpagselected","on","event","context"],"mappings":"CAAA,WACE,YAEAA,QAAOC,QAAQC,WAAW,gBAAiB,SAASC,EAAWC,EAAMC,EAAIC,EAAQC,GAyB/E,QAASC,KACP,GAAIC,MACAC,EAAaC,SAASC,EAAWC,IAAI,cAAe,IACpDC,EAAeH,SAASC,EAAWC,IAAI,gBAAiB,IACxDE,EAAoBJ,SAASC,EAAWC,IAAI,qBAAsB,IAClEG,EAAcC,KAAKC,MAAMH,EAAoB,GAAK,EAClDI,EAAQF,KAAKG,IAAI,EAAGN,EAAeE,GACnCK,EAAOJ,KAAKK,IAAIZ,EAAa,EAAGS,EAAQJ,EAEzBA,GAAfM,EAAOF,GAA6BA,EAAQ,IAC9CA,EAAQF,KAAKG,IAAI,EAAGD,GAASJ,GAAqBM,EAAOF,KAG3D,KAAK,GAAII,GAAIJ,EAAWE,EAAJE,EAAUA,IAC5Bd,EAAMe,KAAKD,EAAEE,WAGfb,GAAWc,IAAI,QAASjB,GAxC1B,GAAIkB,IACFjB,WAAY,cACZI,aAAc,gBACdC,kBAAmB,sBACnBa,mBAAoB,uBACpBC,kBAAmB,sBACnBC,sBAAuB,0BACvBC,kBAAmB,sBAGrBC,GAAEC,KAAKN,EAAM,SAASO,EAAKC,GACzB/B,EAAK8B,GAAO9B,EAAK+B,IAAyB,SAAf/B,EAAK+B,IAAoB,GAAQ,IAG9D/B,EAAKM,WAAaN,EAAK,eAAiBO,SAASP,EAAK,eAAgB,IAAM,GAC5EA,EAAKU,aAAeV,EAAK,iBAAmBO,SAASP,EAAK,iBAAkB,IAAM,EAClFA,EAAKW,kBAAoBX,EAAK,uBAAyBO,SAASP,EAAK,uBAAwB,IAAM,CAEnG,IAAIQ,GAAaT,GACfiC,OAAQ,gBACRhC,KAAMA,GAuBR4B,GAAEC,KAAKN,EAAM,SAASO,EAAKC,GACzBvB,EAAWyB,QAAQF,EAAO,SAASG,GACjCA,EAA8B,mBAAZA,IAA0B,EAAOA,EAEnD1B,EAAWc,IAAIQ,EACD,SAAZI,GAAsB,EACV,QAAZA,GAAqB,EAAOA,OAKlC1B,EAAWyB,QAAQ,eAAgB,SAASC,GAC1C,GAAIH,GAAQlB,KAAKG,IAAI,EAAGH,KAAKK,IAAIX,SAASC,EAAWC,IAAI,cAAe,IAAKyB,IAAWb,UACxF,IAAIU,IAAUG,EAKZ,MAJAC,YAAW,WACT3B,EAAWc,IAAI,eAAgBS,MAG1B,CAGT,IAAIK,GAAgB5B,EAAWC,IAAI,gBAC/B2B,IACFA,EAAc7B,SAASwB,EAAO,KAGhC3B,MAGFI,EAAWyB,QAAQ,+BAAgC,WACjD7B,IACAI,EAAWc,IAAI,mBAAoBf,SAASP,EAAKM,WAAY,IAAMC,SAASP,EAAKW,kBAAmB,OAGtGP,IAEAI,EAAW6B,GAAG,aAAc,SAASC,GACnC9B,EAAWc,IAAI,eAAgBgB,EAAMC,WAGvC/B,EAAW6B,GAAG,eAAgB,WAC5B7B,EAAWc,IAAI,eAAgBf,SAASC,EAAWC,IAAI,gBAAiB,IAAM,KAGhFD,EAAW6B,GAAG,WAAY,WACxB7B,EAAWc,IAAI,eAAgBf,SAASC,EAAWC,IAAI,gBAAiB,IAAM,KAGhFD,EAAW6B,GAAG,YAAa,WACzB7B,EAAWc,IAAI,eAAgB,OAGjCd,EAAW6B,GAAG,WAAY,WACxB7B,EAAWc,IAAI,eAAgBd,EAAWC,IAAI,iBAGhDN","file":"pagination/pl-pagination.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  window.Ractive.controller('pl-pagination', function(component, data, el, config, done) {\n\n    var refs = {\n      totalPages: 'total-pages',\n      pageSelected: 'page-selected',\n      displayPagesCount: 'display-pages-count',\n      displayFirstButton: 'display-first-button',\n      displayLastButton: 'display-last-button',\n      displayPreviousButton: 'display-previous-button',\n      displayNextButton: 'display-next-button'\n    };\n\n    $.each(refs, function(key, value) {\n      data[key] = data[value] && data[value] == 'false' ? false : true;\n    });\n\n    data.totalPages = data['total-pages'] ? parseInt(data['total-pages'], 10) : 20;\n    data.pageSelected = data['page-selected'] ? parseInt(data['page-selected'], 10) : 1;\n    data.displayPagesCount = data['display-pages-count'] ? parseInt(data['display-pages-count'], 10) : 7;\n\n    var Pagination = component({\n      plName: 'pl-pagination',\n      data: data\n    });\n\n    function _updatePages() {\n      var pages = [],\n          totalPages = parseInt(Pagination.get('totalPages'), 10),\n          pageSelected = parseInt(Pagination.get('pageSelected'), 10),\n          displayPagesCount = parseInt(Pagination.get('displayPagesCount'), 10),\n          selectIndex = Math.round(displayPagesCount / 2) - 1,\n          start = Math.max(1, pageSelected - selectIndex),\n          stop = Math.min(totalPages + 1, start + displayPagesCount);\n\n      if (stop - start < displayPagesCount && start > 1) {\n        start = Math.max(1, start - (displayPagesCount - (stop - start)));\n      }\n\n      for (var i = start; i < stop; i++) {\n        pages.push(i.toString());\n      }\n\n      Pagination.set('pages', pages);\n    }\n\n    $.each(refs, function(key, value) {\n      Pagination.observe(value, function(newValue) {\n        newValue = typeof newValue == 'undefined' ? true : newValue;\n\n        Pagination.set(key,\n          newValue == 'false' ? false : (\n          newValue == 'true' ? true : newValue\n        ));\n      });\n    });\n\n    Pagination.observe('pageSelected', function(newValue) {\n      var value = Math.max(1, Math.min(parseInt(Pagination.get('totalPages'), 10), newValue)).toString();\n      if (value !== newValue) {\n        setTimeout(function() {\n          Pagination.set('pageSelected', value);\n        });\n\n        return false;\n      }\n\n      var onpagselected = Pagination.get('onpagselected');\n      if (onpagselected) {\n        onpagselected(parseInt(value, 10));\n      }\n\n      _updatePages();\n    });\n\n    Pagination.observe('totalPages displayPagesCount', function() {\n      _updatePages();\n      Pagination.set('hasActionButtons', parseInt(data.totalPages, 10) > parseInt(data.displayPagesCount, 10));\n    });\n\n    _updatePages();\n\n    Pagination.on('selectPage', function(event) {\n      Pagination.set('pageSelected', event.context);\n    });\n\n    Pagination.on('previousPage', function() {\n      Pagination.set('pageSelected', parseInt(Pagination.get('pageSelected'), 10) - 1);\n    });\n\n    Pagination.on('nextPage', function() {\n      Pagination.set('pageSelected', parseInt(Pagination.get('pageSelected'), 10) + 1);\n    });\n\n    Pagination.on('firstPage', function() {\n      Pagination.set('pageSelected', '1');\n    });\n\n    Pagination.on('lastPage', function() {\n      Pagination.set('pageSelected', Pagination.get('totalPages'));\n    });\n\n    done();\n  });\n})();\n"],"sourceRoot":"/source/"}