!function(){"use strict";window.Ractive.controller("pl-dropdown-title",function(e,t,n,i,o){function l(e,n,i){if(c){n="undefined"==typeof n?!0:n;var o=c.get("titles"),l=null;$.each(o,function(t,n){"string"==typeof e&&e==n.name&&(e=t),n.selected=t===e,t===e&&(l=n)}),c.set("titles",o),c.set("selected.index",e),c.set("selected.name",t.titles[e].name),c.set("noAnimation",!0),setTimeout(function(){d(function(){n&&(l.select(),c.fire("titleSelected",{title:l})),i&&i()})})}}function d(e){c.fire("close",{height:r.dropdownTitle.find(".pl-dropdown-title h2").height()}),c.set("noAnimation",!1),c.set("noCaret",!0),c.set("opened",!1),setTimeout(function(){c.set("noCaret",!1),e&&e()},550)}function s(){d()}t.selected={name:"",index:0},t.opened=!1,t.titles&&$.each(t.titles,function(e){this.selected&&(t.selected.index=e,t.selected.name=this.name)});var c=e({plName:"pl-dropdown-title",data:t,select:l}),r={body:$("body"),dropdownTitle:$(c.el)};c.fireSelected=function(){var e=c.get("selected");e&&c.fire("titleSelected",{title:c.get("titles")[e.index]})},c.toggle=function(){t.titles.length<2||(c.get("opened")?d():(c.fire("open",{height:r.dropdownTitle.find(".pl-dropdown-title h2").height()*(t.titles.length+1)}),c.set("opened",!0)))},c.on("mainClick",function(e){e.original.stopPropagation()}),c.on("toggle",function(e){c.toggle(),e.original.stopPropagation()}),c.selectApp=function(e,t,n){return l(e,t,n),c},c.addTitle=function(e,t){var n=c.get("titles");return t="undefined"==typeof t?n.length:t,"string"==typeof t&&(t="top"==t?0:n.length),n.splice(t,0,e),c.set("titles",n),c},c.removeTitle=function(e){for(var t=c.get("titles"),n=0;n<t.length;n++)if(t[n].name==e){t.splice(n,1);break}return c.set("titles",t),c},c.on("teardown",function(){r.body.unbind("click",s)}),r.body.click(s),o()})}();
//# sourceMappingURL=pl-dropdown-title.min.js.map
