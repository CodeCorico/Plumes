{"version":3,"sources":["dropdowns/dropdown-title.js"],"names":["window","Ractive","controller","component","data","el","config","done","_select","indexOrName","fireFunc","callback","dropdownTitle","titles","get","titleToSelect","$","each","i","title","name","selected","set","setTimeout","_close","select","fire","height","find","_click","_$el","body","index","opened","this","fireSelected","toggle","length","on","event","original","stopPropagation","selectApp","addTitle","indexOrPosition","splice","removeTitle","unbind","click"],"mappings":"CAAA,WACE,YAEAA,QAAOC,QAAQC,WAAW,iBAAkB,SAASC,EAAWC,EAAMC,EAAIC,EAAQC,GAsBhF,QAASC,GAAQC,EAAaC,EAAUC,GACtC,GAAKC,EAAL,CAIAF,EAA8B,mBAAZA,IAA0B,EAAOA,CAEnD,IAAIG,GAASD,EAAcE,IAAI,UAC3BC,EAAgB,IAEpBC,GAAEC,KAAKJ,EAAQ,SAASK,EAAGC,GACC,gBAAfV,IAA2BA,GAAeU,EAAMC,OACzDX,EAAcS,GAGhBC,EAAME,SAAWH,IAAMT,EAEnBS,IAAMT,IACRM,EAAgBI,KAIpBP,EAAcU,IAAI,SAAUT,GAE5BD,EAAcU,IAAI,iBAAkBb,GACpCG,EAAcU,IAAI,gBAAiBlB,EAAKS,OAAOJ,GAAaW,MAC5DR,EAAcU,IAAI,eAAe,GAEjCC,WAAW,WACTC,EAAO,WACDd,IACFK,EAAcU,SACdb,EAAcc,KAAK,iBACjBP,MAAOJ,KAIPJ,GACFA,SAMR,QAASa,GAAOb,GACdC,EAAcc,KAAK,SACjBC,OAAQX,EAAEX,GAAIuB,KAAK,sBAAsBD,WAG3Cf,EAAcU,IAAI,eAAe,GACjCV,EAAcU,IAAI,WAAW,GAC7BV,EAAcU,IAAI,UAAU,GAE5BC,WAAW,WACTX,EAAcU,IAAI,WAAW,GAEzBX,GACFA,KAED,KAGL,QAASkB,KACPL,IAnFF,GAAIZ,GAAgB,KAChBkB,GACEC,KAAMf,EAAE,QAGdZ,GAAKiB,UACHD,KAAM,GACNY,MAAO,GAET5B,EAAK6B,QAAS,EAEV7B,EAAKS,QACPG,EAAEC,KAAKb,EAAKS,OAAQ,SAASK,GACvBgB,KAAKb,WACPjB,EAAKiB,SAASW,MAAQd,EACtBd,EAAKiB,SAASD,KAAOc,KAAKd,OAuEhC,IAAIR,GAAgBT,GAClBC,KAAMA,EACNqB,OAAQjB,GAGVI,GAAcuB,aAAe,WAC3B,GAAId,GAAWT,EAAcE,IAAI,WAE7BO,IACFT,EAAcc,KAAK,iBACjBP,MAAOP,EAAcE,IAAI,UAAUO,EAASW,UAKlDpB,EAAcwB,OAAS,WACjBhC,EAAKS,OAAOwB,OAAS,IAIrBzB,EAAcE,IAAI,UACpBU,KAGAZ,EAAcc,KAAK,QACjBC,OAAQX,EAAEX,GAAIuB,KAAK,sBAAsBD,UAAYvB,EAAKS,OAAOwB,OAAS,KAE5EzB,EAAcU,IAAI,UAAU,MAIhCV,EAAc0B,GAAG,YAAa,SAASC,GACrCA,EAAMC,SAASC,oBAGjB7B,EAAc0B,GAAG,SAAU,SAASC,GAClC3B,EAAcwB,SACdG,EAAMC,SAASC,oBAGjB7B,EAAc8B,UAAY,SAAStB,EAAMV,EAAUC,GAGjD,MAFAH,GAAQY,EAAMV,EAAUC,GAEjBC,GAGTA,EAAc+B,SAAW,SAASxB,EAAOyB,GACvC,GAAI/B,GAASD,EAAcE,IAAI,SAY/B,OAVA8B,GAA4C,mBAAnBA,GAAiC/B,EAAOwB,OAASO,EAE5C,gBAAnBA,KACTA,EAAqC,OAAnBA,EAA2B,EAAI/B,EAAOwB,QAG1DxB,EAAOgC,OAAOD,EAAiB,EAAGzB,GAElCP,EAAcU,IAAI,SAAUT,GAErBD,GAGTA,EAAckC,YAAc,SAAS1B,GAGnC,IAAK,GAFDP,GAASD,EAAcE,IAAI,UAEtBI,EAAI,EAAGA,EAAIL,EAAOwB,OAAQnB,IACjC,GAAIL,EAAOK,GAAGE,MAAQA,EAAM,CAC1BP,EAAOgC,OAAO3B,EAAG,EACjB,OAMJ,MAFAN,GAAcU,IAAI,SAAUT,GAErBD,GAGTA,EAAc0B,GAAG,WAAY,WAC3BR,EAAKC,KAAKgB,OAAO,QAASlB,KAG5BC,EAAKC,KAAKiB,MAAMnB,GAEhBtB","file":"dropdowns/dropdown-title.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  window.Ractive.controller('dropdown-title', function(component, data, el, config, done) {\n\n    var dropdownTitle = null,\n        _$el = {\n          body: $('body')\n        };\n\n    data.selected = {\n      name: '',\n      index: 0\n    };\n    data.opened = false;\n\n    if (data.titles) {\n      $.each(data.titles, function(i) {\n        if (this.selected) {\n          data.selected.index = i;\n          data.selected.name = this.name;\n        }\n      });\n    }\n\n    function _select(indexOrName, fireFunc, callback) {\n      if (!dropdownTitle) {\n        return;\n      }\n\n      fireFunc = typeof fireFunc == 'undefined' ? true : fireFunc;\n\n      var titles = dropdownTitle.get('titles'),\n          titleToSelect = null;\n\n      $.each(titles, function(i, title) {\n        if (typeof indexOrName == 'string' && indexOrName == title.name) {\n          indexOrName = i;\n        }\n\n        title.selected = i === indexOrName;\n\n        if (i === indexOrName) {\n          titleToSelect = title;\n        }\n      });\n\n      dropdownTitle.set('titles', titles);\n\n      dropdownTitle.set('selected.index', indexOrName);\n      dropdownTitle.set('selected.name', data.titles[indexOrName].name);\n      dropdownTitle.set('noAnimation', true);\n\n      setTimeout(function() {\n        _close(function() {\n          if (fireFunc) {\n            titleToSelect.select();\n            dropdownTitle.fire('titleSelected', {\n              title: titleToSelect\n            });\n          }\n\n          if (callback) {\n            callback();\n          }\n        });\n      });\n    }\n\n    function _close(callback) {\n      dropdownTitle.fire('close', {\n        height: $(el).find('.dropdown-title h2').height()\n      });\n\n      dropdownTitle.set('noAnimation', false);\n      dropdownTitle.set('noCaret', true);\n      dropdownTitle.set('opened', false);\n\n      setTimeout(function() {\n        dropdownTitle.set('noCaret', false);\n\n        if (callback) {\n          callback();\n        }\n      }, 550);\n    }\n\n    function _click() {\n      _close();\n    }\n\n    var dropdownTitle = component({\n      data: data,\n      select: _select\n    });\n\n    dropdownTitle.fireSelected = function() {\n      var selected = dropdownTitle.get('selected');\n\n      if (selected) {\n        dropdownTitle.fire('titleSelected', {\n          title: dropdownTitle.get('titles')[selected.index]\n        });\n      }\n    };\n\n    dropdownTitle.toggle = function() {\n      if (data.titles.length < 2) {\n        return;\n      }\n\n      if (dropdownTitle.get('opened')) {\n        _close();\n      }\n      else {\n        dropdownTitle.fire('open', {\n          height: $(el).find('.dropdown-title h2').height() * (data.titles.length + 1)\n        });\n        dropdownTitle.set('opened', true);\n      }\n    };\n\n    dropdownTitle.on('mainClick', function(event) {\n      event.original.stopPropagation();\n    });\n\n    dropdownTitle.on('toggle', function(event) {\n      dropdownTitle.toggle();\n      event.original.stopPropagation();\n    });\n\n    dropdownTitle.selectApp = function(name, fireFunc, callback) {\n      _select(name, fireFunc, callback);\n\n      return dropdownTitle;\n    };\n\n    dropdownTitle.addTitle = function(title, indexOrPosition) {\n      var titles = dropdownTitle.get('titles');\n\n      indexOrPosition = typeof indexOrPosition == 'undefined' ? titles.length : indexOrPosition;\n\n      if (typeof indexOrPosition == 'string') {\n        indexOrPosition = indexOrPosition == 'top' ? 0 : titles.length;\n      }\n\n      titles.splice(indexOrPosition, 0, title);\n\n      dropdownTitle.set('titles', titles);\n\n      return dropdownTitle;\n    };\n\n    dropdownTitle.removeTitle = function(name) {\n      var titles = dropdownTitle.get('titles');\n\n      for (var i = 0; i < titles.length; i++) {\n        if (titles[i].name == name) {\n          titles.splice(i, 1);\n          break;\n        }\n      }\n\n      dropdownTitle.set('titles', titles);\n\n      return dropdownTitle;\n    };\n\n    dropdownTitle.on('teardown', function() {\n      _$el.body.unbind('click', _click);\n    });\n\n    _$el.body.click(_click);\n\n    done();\n  });\n\n})();\n"],"sourceRoot":"/source/"}