{"version":3,"sources":["dropdowns/pl-dropdown-title.js"],"names":["window","Ractive","controller","component","data","el","config","done","_select","indexOrName","fireFunc","callback","DropdownTitle","titles","get","titleToSelect","$","each","i","title","name","selected","set","setTimeout","_close","select","fire","height","_$el","dropdownTitle","find","_click","index","opened","this","plName","body","fireSelected","toggle","length","on","event","original","stopPropagation","selectApp","addTitle","indexOrPosition","splice","removeTitle","unbind","click"],"mappings":"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","file":"dropdowns/pl-dropdown-title.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  window.Ractive.controller('pl-dropdown-title', function(component, data, el, config, done) {\n\n    data.selected = {\n      name: '',\n      index: 0\n    };\n    data.opened = false;\n\n    if (data.titles) {\n      $.each(data.titles, function(i) {\n        if (this.selected) {\n          data.selected.index = i;\n          data.selected.name = this.name;\n        }\n      });\n    }\n\n    var DropdownTitle = component({\n          plName: 'pl-dropdown-title',\n          data: data,\n          select: _select\n        }),\n        _$el = {\n          body: $('body'),\n          dropdownTitle: $(DropdownTitle.el)\n        };\n\n    function _select(indexOrName, fireFunc, callback) {\n      if (!DropdownTitle) {\n        return;\n      }\n\n      fireFunc = typeof fireFunc == 'undefined' ? true : fireFunc;\n\n      var titles = DropdownTitle.get('titles'),\n          titleToSelect = null;\n\n      $.each(titles, function(i, title) {\n        if (typeof indexOrName == 'string' && indexOrName == title.name) {\n          indexOrName = i;\n        }\n\n        title.selected = i === indexOrName;\n\n        if (i === indexOrName) {\n          titleToSelect = title;\n        }\n      });\n\n      DropdownTitle.set('titles', titles);\n\n      DropdownTitle.set('selected.index', indexOrName);\n      DropdownTitle.set('selected.name', data.titles[indexOrName].name);\n      DropdownTitle.set('noAnimation', true);\n\n      setTimeout(function() {\n        _close(function() {\n          if (fireFunc) {\n            titleToSelect.select();\n            DropdownTitle.fire('titleSelected', {\n              title: titleToSelect\n            });\n          }\n\n          if (callback) {\n            callback();\n          }\n        });\n      });\n    }\n\n    function _close(callback) {\n      DropdownTitle.fire('close', {\n        height: _$el.dropdownTitle.find('.pl-dropdown-title h2').height()\n      });\n\n      DropdownTitle.set('noAnimation', false);\n      DropdownTitle.set('noCaret', true);\n      DropdownTitle.set('opened', false);\n\n      setTimeout(function() {\n        DropdownTitle.set('noCaret', false);\n\n        if (callback) {\n          callback();\n        }\n      }, 550);\n    }\n\n    function _click() {\n      _close();\n    }\n\n    DropdownTitle.fireSelected = function() {\n      var selected = DropdownTitle.get('selected');\n\n      if (selected) {\n        DropdownTitle.fire('titleSelected', {\n          title: DropdownTitle.get('titles')[selected.index]\n        });\n      }\n    };\n\n    DropdownTitle.toggle = function() {\n      if (data.titles.length < 2) {\n        return;\n      }\n\n      if (DropdownTitle.get('opened')) {\n        var selected = DropdownTitle.get('selected');\n\n        if (selected && typeof selected.index == 'number') {\n          _select(selected.index);\n        }\n        else {\n          _close();\n        }\n      }\n      else {\n        DropdownTitle.fire('open', {\n          height: _$el.dropdownTitle.find('.pl-dropdown-title h2').height() * (data.titles.length + 1)\n        });\n        DropdownTitle.set('opened', true);\n      }\n    };\n\n    DropdownTitle.on('mainClick', function(event) {\n      event.original.stopPropagation();\n    });\n\n    DropdownTitle.on('toggle', function(event) {\n      DropdownTitle.toggle();\n      event.original.stopPropagation();\n    });\n\n    DropdownTitle.selectApp = function(name, fireFunc, callback) {\n      _select(name, fireFunc, callback);\n\n      return DropdownTitle;\n    };\n\n    DropdownTitle.addTitle = function(title, indexOrPosition) {\n      var titles = DropdownTitle.get('titles');\n\n      indexOrPosition = typeof indexOrPosition == 'undefined' ? titles.length : indexOrPosition;\n\n      if (typeof indexOrPosition == 'string') {\n        indexOrPosition = indexOrPosition == 'top' ? 0 : titles.length;\n      }\n\n      titles.splice(indexOrPosition, 0, title);\n\n      DropdownTitle.set('titles', titles);\n\n      return DropdownTitle;\n    };\n\n    DropdownTitle.removeTitle = function(name) {\n      var titles = DropdownTitle.get('titles');\n\n      for (var i = 0; i < titles.length; i++) {\n        if (titles[i].name == name) {\n          titles.splice(i, 1);\n          break;\n        }\n      }\n\n      DropdownTitle.set('titles', titles);\n\n      return DropdownTitle;\n    };\n\n    DropdownTitle.on('teardown', function() {\n      _$el.body.unbind('click', _click);\n    });\n\n    _$el.body.click(_click);\n\n    done();\n  });\n\n})();\n"],"sourceRoot":"/source/"}