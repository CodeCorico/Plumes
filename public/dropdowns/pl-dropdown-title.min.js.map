{"version":3,"sources":["dropdowns/pl-dropdown-title.js"],"names":["window","Ractive","controller","component","data","el","config","done","_select","indexOrName","fireFunc","callback","DropdownTitle","titles","get","titleToSelect","forEach","title","i","name","selected","set","setTimeout","_close","select","fire","height","_$el","dropdownTitle","find","_click","index","opened","plName","body","$","fireSelected","toggle","length","on","event","original","stopPropagation","selectApp","addTitle","indexOrPosition","splice","removeTitle","unbind","click"],"mappings":"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","file":"dropdowns/pl-dropdown-title.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  window.Ractive.controller('pl-dropdown-title', function(component, data, el, config, done) {\n\n    data.selected = {\n      name: '',\n      index: 0\n    };\n    data.opened = false;\n\n    if (data.titles) {\n      data.titles.forEach(function(title, i) {\n        if (title.selected) {\n          data.selected.index = i;\n          data.selected.name = title.name;\n        }\n      });\n    }\n\n    var DropdownTitle = component({\n          plName: 'pl-dropdown-title',\n          data: data,\n          select: _select\n        }),\n        _$el = {\n          body: $('body'),\n          dropdownTitle: $(DropdownTitle.el)\n        };\n\n    function _select(indexOrName, fireFunc, callback) {\n      if (!DropdownTitle) {\n        return;\n      }\n\n      fireFunc = typeof fireFunc == 'undefined' ? true : fireFunc;\n\n      var titles = DropdownTitle.get('titles'),\n          titleToSelect = null;\n\n      titles.forEach(function(title, i) {\n        if (typeof indexOrName == 'string' && indexOrName == title.name) {\n          indexOrName = i;\n        }\n\n        title.selected = i === indexOrName;\n\n        if (i === indexOrName) {\n          titleToSelect = title;\n        }\n      });\n\n      DropdownTitle.set('titles', titles);\n\n      DropdownTitle.set('selected.index', indexOrName);\n      DropdownTitle.set('selected.name', data.titles[indexOrName].name);\n      DropdownTitle.set('noAnimation', true);\n\n      setTimeout(function() {\n        _close(function() {\n          if (fireFunc) {\n            titleToSelect.select();\n            DropdownTitle.fire('titleSelected', {\n              title: titleToSelect\n            });\n          }\n\n          if (callback) {\n            callback();\n          }\n        });\n      });\n    }\n\n    function _close(callback) {\n      DropdownTitle.fire('close', {\n        height: _$el.dropdownTitle.find('.pl-dropdown-title h2').height()\n      });\n\n      DropdownTitle.set('noAnimation', false);\n      DropdownTitle.set('noCaret', true);\n      DropdownTitle.set('opened', false);\n\n      setTimeout(function() {\n        DropdownTitle.set('noCaret', false);\n\n        if (callback) {\n          callback();\n        }\n      }, 550);\n    }\n\n    function _click() {\n      _close();\n    }\n\n    DropdownTitle.fireSelected = function() {\n      var selected = DropdownTitle.get('selected');\n\n      if (selected) {\n        DropdownTitle.fire('titleSelected', {\n          title: DropdownTitle.get('titles')[selected.index]\n        });\n      }\n    };\n\n    DropdownTitle.toggle = function() {\n      if (data.titles.length < 2) {\n        return;\n      }\n\n      if (DropdownTitle.get('opened')) {\n        var selected = DropdownTitle.get('selected');\n\n        if (selected && typeof selected.index == 'number') {\n          _select(selected.index);\n        }\n        else {\n          _close();\n        }\n      }\n      else {\n        DropdownTitle.fire('open', {\n          height: _$el.dropdownTitle.find('.pl-dropdown-title h2').height() * (data.titles.length + 1)\n        });\n        DropdownTitle.set('opened', true);\n      }\n    };\n\n    DropdownTitle.on('mainClick', function(event) {\n      event.original.stopPropagation();\n    });\n\n    DropdownTitle.on('toggle', function(event) {\n      DropdownTitle.toggle();\n      event.original.stopPropagation();\n    });\n\n    DropdownTitle.selectApp = function(name, fireFunc, callback) {\n      _select(name, fireFunc, callback);\n\n      return DropdownTitle;\n    };\n\n    DropdownTitle.addTitle = function(title, indexOrPosition) {\n      var titles = DropdownTitle.get('titles');\n\n      indexOrPosition = typeof indexOrPosition == 'undefined' ? titles.length : indexOrPosition;\n\n      if (typeof indexOrPosition == 'string') {\n        indexOrPosition = indexOrPosition == 'top' ? 0 : titles.length;\n      }\n\n      titles.splice(indexOrPosition, 0, title);\n\n      DropdownTitle.set('titles', titles);\n\n      return DropdownTitle;\n    };\n\n    DropdownTitle.removeTitle = function(name) {\n      var titles = DropdownTitle.get('titles');\n\n      for (var i = 0; i < titles.length; i++) {\n        if (titles[i].name == name) {\n          titles.splice(i, 1);\n          break;\n        }\n      }\n\n      DropdownTitle.set('titles', titles);\n\n      return DropdownTitle;\n    };\n\n    DropdownTitle.on('teardown', function() {\n      _$el.body.unbind('click', _click);\n    });\n\n    _$el.body.click(_click);\n\n    done();\n  });\n\n})();\n"],"sourceRoot":"/source/"}