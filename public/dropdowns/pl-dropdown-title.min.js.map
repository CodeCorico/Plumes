{"version":3,"sources":["dropdowns/pl-dropdown-title.js"],"names":["window","Ractive","controller","component","data","el","config","done","_select","indexOrName","fireFunc","callback","dropdownTitle","titles","get","titleToSelect","$","each","i","title","name","selected","set","setTimeout","_close","select","fire","height","_$el","find","_click","index","opened","this","plName","body","fireSelected","toggle","length","on","event","original","stopPropagation","selectApp","addTitle","indexOrPosition","splice","removeTitle","unbind","click"],"mappings":"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","file":"dropdowns/pl-dropdown-title.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  window.Ractive.controller('pl-dropdown-title', function(component, data, el, config, done) {\n\n    data.selected = {\n      name: '',\n      index: 0\n    };\n    data.opened = false;\n\n    if (data.titles) {\n      $.each(data.titles, function(i) {\n        if (this.selected) {\n          data.selected.index = i;\n          data.selected.name = this.name;\n        }\n      });\n    }\n\n    var dropdownTitle = component({\n          plName: 'pl-dropdown-title',\n          data: data,\n          select: _select\n        }),\n        _$el = {\n          body: $('body'),\n          dropdownTitle: $(dropdownTitle.el)\n        };\n\n    function _select(indexOrName, fireFunc, callback) {\n      if (!dropdownTitle) {\n        return;\n      }\n\n      fireFunc = typeof fireFunc == 'undefined' ? true : fireFunc;\n\n      var titles = dropdownTitle.get('titles'),\n          titleToSelect = null;\n\n      $.each(titles, function(i, title) {\n        if (typeof indexOrName == 'string' && indexOrName == title.name) {\n          indexOrName = i;\n        }\n\n        title.selected = i === indexOrName;\n\n        if (i === indexOrName) {\n          titleToSelect = title;\n        }\n      });\n\n      dropdownTitle.set('titles', titles);\n\n      dropdownTitle.set('selected.index', indexOrName);\n      dropdownTitle.set('selected.name', data.titles[indexOrName].name);\n      dropdownTitle.set('noAnimation', true);\n\n      setTimeout(function() {\n        _close(function() {\n          if (fireFunc) {\n            titleToSelect.select();\n            dropdownTitle.fire('titleSelected', {\n              title: titleToSelect\n            });\n          }\n\n          if (callback) {\n            callback();\n          }\n        });\n      });\n    }\n\n    function _close(callback) {\n      dropdownTitle.fire('close', {\n        height: _$el.dropdownTitle.find('.pl-dropdown-title h2').height()\n      });\n\n      dropdownTitle.set('noAnimation', false);\n      dropdownTitle.set('noCaret', true);\n      dropdownTitle.set('opened', false);\n\n      setTimeout(function() {\n        dropdownTitle.set('noCaret', false);\n\n        if (callback) {\n          callback();\n        }\n      }, 550);\n    }\n\n    function _click() {\n      _close();\n    }\n\n    dropdownTitle.fireSelected = function() {\n      var selected = dropdownTitle.get('selected');\n\n      if (selected) {\n        dropdownTitle.fire('titleSelected', {\n          title: dropdownTitle.get('titles')[selected.index]\n        });\n      }\n    };\n\n    dropdownTitle.toggle = function() {\n      if (data.titles.length < 2) {\n        return;\n      }\n\n      if (dropdownTitle.get('opened')) {\n        _close();\n      }\n      else {\n        dropdownTitle.fire('open', {\n          height: _$el.dropdownTitle.find('.pl-dropdown-title h2').height() * (data.titles.length + 1)\n        });\n        dropdownTitle.set('opened', true);\n      }\n    };\n\n    dropdownTitle.on('mainClick', function(event) {\n      event.original.stopPropagation();\n    });\n\n    dropdownTitle.on('toggle', function(event) {\n      dropdownTitle.toggle();\n      event.original.stopPropagation();\n    });\n\n    dropdownTitle.selectApp = function(name, fireFunc, callback) {\n      _select(name, fireFunc, callback);\n\n      return dropdownTitle;\n    };\n\n    dropdownTitle.addTitle = function(title, indexOrPosition) {\n      var titles = dropdownTitle.get('titles');\n\n      indexOrPosition = typeof indexOrPosition == 'undefined' ? titles.length : indexOrPosition;\n\n      if (typeof indexOrPosition == 'string') {\n        indexOrPosition = indexOrPosition == 'top' ? 0 : titles.length;\n      }\n\n      titles.splice(indexOrPosition, 0, title);\n\n      dropdownTitle.set('titles', titles);\n\n      return dropdownTitle;\n    };\n\n    dropdownTitle.removeTitle = function(name) {\n      var titles = dropdownTitle.get('titles');\n\n      for (var i = 0; i < titles.length; i++) {\n        if (titles[i].name == name) {\n          titles.splice(i, 1);\n          break;\n        }\n      }\n\n      dropdownTitle.set('titles', titles);\n\n      return dropdownTitle;\n    };\n\n    dropdownTitle.on('teardown', function() {\n      _$el.body.unbind('click', _click);\n    });\n\n    _$el.body.click(_click);\n\n    done();\n  });\n\n})();\n"],"sourceRoot":"/source/"}