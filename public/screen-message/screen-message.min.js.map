{"version":3,"sources":["screen-message/screen-message.js"],"names":["window","Ractive","controller","component","data","el","config","done","_play","playArgs","_playArgs","Message","ScreenMessage","childrenRequire","fire","set","setTimeout","message","callback","_done","lineCallback","_$el","height","$","outerHeight","displayedLineCallback","displayTextTime","displayWordTime","freezeLastLine","lastLineToTitle","on","require","then"],"mappings":"CAAA,WACE,YAEAA,QAAOC,QAAQC,WAAW,iBAAkB,SAASC,EAAWC,EAAMC,EAAIC,EAAQC,GAWhF,QAASC,GAAMC,GACb,GAAIA,GAAYA,GAAYC,EAAW,CACrC,GAAIC,GAAUC,EAAcC,gBAAgB,EAE5CF,GAAQG,KAAK,SAEbJ,EAAYD,EACZG,EAAcG,IAAI,WAAW,GAC7BH,EAAcG,IAAI,eAAe,GACjCH,EAAcG,IAAI,cAAc,GAEhCC,WAAW,WACTL,EAAQG,KAAK,QACXG,QAASR,EAASQ,QAClBC,SAAUC,EACVC,aAAc,WACZR,EAAcG,IAAI,cAAeM,EAAKrB,OAAOsB,SAAWC,EAAEZ,EAAQN,IAAImB,eAAiB,GAEnFd,EAAUU,cACZV,EAAUU,aAAaT,IAG3Bc,sBAAuBf,EAAUe,uBAAyB,KAC1DC,gBAAiBhB,EAAUgB,iBAAoB,KAC/CC,gBAAiBjB,EAAUiB,iBAAmB,KAC9CC,eAAgBlB,EAAUkB,gBAAkBlB,EAAUmB,iBAAmB,QAE1E,MAIP,QAASV,KACP,MAAIT,GAAUkB,gBACRlB,EAAUH,MACZG,EAAUH,YAEZG,EAAY,OAILA,EAAUmB,iBACjBjB,EAAcG,IAAI,aAAc,cAE5BL,EAAUH,MACZG,EAAUH,OAEZG,EAAY,SAEZM,YAAW,WACTJ,EAAcG,IAAI,aAAc,cAChCH,EAAcG,IAAI,aAAc,MAC/B,OAKLH,EAAcG,IAAI,eAAe,OAEjCC,YAAW,WACTJ,EAAcG,IAAI,WAAW,GAC7BH,EAAcG,IAAI,eAAe,GAE7BL,EAAUH,MACZG,EAAUH,OAGZG,EAAY,MACX,MA5EL,GAAIW,IACErB,OAAQuB,EAAEvB,SAEZU,EAAY,KAEZE,EAAgBT,GAClBC,KAAMA,GAyERQ,GAAckB,GAAG,aAAc,SAASZ,GACtCN,EAAcG,IAAI,aAAc,kBAChCH,EAAcG,IAAI,aAAc,IAE5BG,GACFF,WAAW,WACTJ,EAAcG,IAAI,aAAc,IAEhCG,KACC,OAIPN,EAAckB,GAAG,OAAQ,SAASrB,GAChCD,EAAMC,KAGRG,EAAcmB,UAAUC,KAAKzB","file":"screen-message/screen-message.min.js","sourcesContent":["(function() {\r\n  'use strict';\r\n\r\n  window.Ractive.controller('screen-message', function(component, data, el, config, done) {\r\n\r\n    var _$el = {\r\n          window: $(window)\r\n        },\r\n        _playArgs = null;\r\n\r\n    var ScreenMessage = component({\r\n      data: data\r\n    });\r\n\r\n    function _play(playArgs) {\r\n      if (playArgs && playArgs != _playArgs) {\r\n        var Message = ScreenMessage.childrenRequire[0];\r\n\r\n        Message.fire('reset');\r\n\r\n        _playArgs = playArgs;\r\n        ScreenMessage.set('playing', true);\r\n        ScreenMessage.set('playingDone', false);\r\n        ScreenMessage.set('storyboard', false);\r\n\r\n        setTimeout(function() {\r\n          Message.fire('play', {\r\n            message: playArgs.message,\r\n            callback: _done,\r\n            lineCallback: function() {\r\n              ScreenMessage.set('messageTop', (_$el.window.height() - $(Message.el).outerHeight()) / 2);\r\n\r\n              if (_playArgs.lineCallback) {\r\n                _playArgs.lineCallback(Message);\r\n              }\r\n            },\r\n            displayedLineCallback: _playArgs.displayedLineCallback || null,\r\n            displayTextTime: _playArgs.displayTextTime ||  null,\r\n            displayWordTime: _playArgs.displayWordTime || null,\r\n            freezeLastLine: _playArgs.freezeLastLine || _playArgs.lastLineToTitle || null\r\n          });\r\n        }, 550);\r\n      }\r\n    }\r\n\r\n    function _done() {\r\n      if (_playArgs.freezeLastLine) {\r\n        if (_playArgs.done) {\r\n          _playArgs.done();\r\n        }\r\n        _playArgs = null;\r\n\r\n        return;\r\n      }\r\n      else if (_playArgs.lastLineToTitle) {\r\n        ScreenMessage.set('storyboard', 'sb-title-1');\r\n\r\n        if (_playArgs.done) {\r\n          _playArgs.done();\r\n        }\r\n        _playArgs = null;\r\n\r\n        setTimeout(function() {\r\n          ScreenMessage.set('storyboard', 'sb-title-2');\r\n          ScreenMessage.set('messageTop', 100);\r\n        }, 650);\r\n\r\n        return;\r\n      }\r\n\r\n      ScreenMessage.set('playingDone', true);\r\n\r\n      setTimeout(function() {\r\n        ScreenMessage.set('playing', false);\r\n        ScreenMessage.set('playingDone', false);\r\n\r\n        if (_playArgs.done) {\r\n          _playArgs.done();\r\n        }\r\n\r\n        _playArgs = null;\r\n      }, 350);\r\n    }\r\n\r\n    ScreenMessage.on('closeTitle', function(callback) {\r\n      ScreenMessage.set('storyboard', 'sb-title-out-1');\r\n      ScreenMessage.set('messageTop', 70);\r\n\r\n      if (callback) {\r\n        setTimeout(function() {\r\n          ScreenMessage.set('storyboard', '');\r\n\r\n          callback();\r\n        }, 550);\r\n      }\r\n    });\r\n\r\n    ScreenMessage.on('play', function(playArgs) {\r\n      _play(playArgs);\r\n    });\r\n\r\n    ScreenMessage.require().then(done);\r\n  });\r\n\r\n})();\r\n"],"sourceRoot":"/source/"}