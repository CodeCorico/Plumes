{"version":3,"sources":["screen-message/screen-message.js"],"names":["window","Ractive","controller","component","data","el","config","done","_play","playArgs","_playArgs","Message","ScreenMessage","childrenRequire","fire","set","setTimeout","message","callback","_done","lineCallback","_$el","height","$","outerHeight","displayedLineCallback","displayTextTime","displayWordTime","freezeLastLine","lastLineToTitle","on","require","then"],"mappings":"CAAA,WACE,YAEAA,QAAOC,QAAQC,WAAW,iBAAkB,SAASC,EAAWC,EAAMC,EAAIC,EAAQC,GAWhF,QAASC,GAAMC,GACb,GAAIA,GAAYA,GAAYC,EAAW,CACrC,GAAIC,GAAUC,EAAcC,gBAAgB,EAE5CF,GAAQG,KAAK,SAEbJ,EAAYD,EACZG,EAAcG,IAAI,WAAW,GAC7BH,EAAcG,IAAI,eAAe,GACjCH,EAAcG,IAAI,cAAc,GAEhCC,WAAW,WACTL,EAAQG,KAAK,QACXG,QAASR,EAASQ,QAClBC,SAAUC,EACVC,aAAc,WACZR,EAAcG,IAAI,cAAeM,EAAKrB,OAAOsB,SAAWC,EAAEZ,EAAQN,IAAImB,eAAiB,GAEnFd,EAAUU,cACZV,EAAUU,aAAaT,IAG3Bc,sBAAuBf,EAAUe,uBAAyB,KAC1DC,gBAAiBhB,EAAUgB,iBAAoB,KAC/CC,gBAAiBjB,EAAUiB,iBAAmB,KAC9CC,eAAgBlB,EAAUkB,gBAAkBlB,EAAUmB,iBAAmB,QAE1E,MAIP,QAASV,KACP,MAAIT,GAAUkB,gBACRlB,EAAUH,MACZG,EAAUH,YAEZG,EAAY,OAILA,EAAUmB,iBACjBjB,EAAcG,IAAI,aAAc,cAE5BL,EAAUH,MACZG,EAAUH,OAEZG,EAAY,SAEZM,YAAW,WACTJ,EAAcG,IAAI,aAAc,cAChCH,EAAcG,IAAI,aAAc,MAC/B,OAKLH,EAAcG,IAAI,eAAe,OAEjCC,YAAW,WACTJ,EAAcG,IAAI,WAAW,GAC7BH,EAAcG,IAAI,eAAe,GAE7BL,EAAUH,MACZG,EAAUH,OAGZG,EAAY,MACX,MA5EL,GAAIW,IACErB,OAAQuB,EAAEvB,SAEZU,EAAY,KAEZE,EAAgBT,GAClBC,KAAMA,GAyERQ,GAAckB,GAAG,aAAc,SAASZ,GACtCN,EAAcG,IAAI,aAAc,kBAChCH,EAAcG,IAAI,aAAc,IAE5BG,GACFF,WAAW,WACTJ,EAAcG,IAAI,aAAc,IAEhCG,KACC,OAIPN,EAAckB,GAAG,OAAQ,SAASrB,GAChCD,EAAMC,KAGRG,EAAcmB,UAAUC,KAAKzB","file":"screen-message/screen-message.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  window.Ractive.controller('screen-message', function(component, data, el, config, done) {\n\n    var _$el = {\n          window: $(window)\n        },\n        _playArgs = null;\n\n    var ScreenMessage = component({\n      data: data\n    });\n\n    function _play(playArgs) {\n      if (playArgs && playArgs != _playArgs) {\n        var Message = ScreenMessage.childrenRequire[0];\n\n        Message.fire('reset');\n\n        _playArgs = playArgs;\n        ScreenMessage.set('playing', true);\n        ScreenMessage.set('playingDone', false);\n        ScreenMessage.set('storyboard', false);\n\n        setTimeout(function() {\n          Message.fire('play', {\n            message: playArgs.message,\n            callback: _done,\n            lineCallback: function() {\n              ScreenMessage.set('messageTop', (_$el.window.height() - $(Message.el).outerHeight()) / 2);\n\n              if (_playArgs.lineCallback) {\n                _playArgs.lineCallback(Message);\n              }\n            },\n            displayedLineCallback: _playArgs.displayedLineCallback || null,\n            displayTextTime: _playArgs.displayTextTime ||  null,\n            displayWordTime: _playArgs.displayWordTime || null,\n            freezeLastLine: _playArgs.freezeLastLine || _playArgs.lastLineToTitle || null\n          });\n        }, 550);\n      }\n    }\n\n    function _done() {\n      if (_playArgs.freezeLastLine) {\n        if (_playArgs.done) {\n          _playArgs.done();\n        }\n        _playArgs = null;\n\n        return;\n      }\n      else if (_playArgs.lastLineToTitle) {\n        ScreenMessage.set('storyboard', 'sb-title-1');\n\n        if (_playArgs.done) {\n          _playArgs.done();\n        }\n        _playArgs = null;\n\n        setTimeout(function() {\n          ScreenMessage.set('storyboard', 'sb-title-2');\n          ScreenMessage.set('messageTop', 100);\n        }, 650);\n\n        return;\n      }\n\n      ScreenMessage.set('playingDone', true);\n\n      setTimeout(function() {\n        ScreenMessage.set('playing', false);\n        ScreenMessage.set('playingDone', false);\n\n        if (_playArgs.done) {\n          _playArgs.done();\n        }\n\n        _playArgs = null;\n      }, 350);\n    }\n\n    ScreenMessage.on('closeTitle', function(callback) {\n      ScreenMessage.set('storyboard', 'sb-title-out-1');\n      ScreenMessage.set('messageTop', 70);\n\n      if (callback) {\n        setTimeout(function() {\n          ScreenMessage.set('storyboard', '');\n\n          callback();\n        }, 550);\n      }\n    });\n\n    ScreenMessage.on('play', function(playArgs) {\n      _play(playArgs);\n    });\n\n    ScreenMessage.require().then(done);\n  });\n\n})();\n"],"sourceRoot":"/source/"}