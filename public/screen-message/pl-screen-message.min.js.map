{"version":3,"sources":["screen-message/pl-screen-message.js"],"names":["window","Ractive","controller","component","data","el","config","done","_play","playArgs","_playArgs","Message","screenMessage","childrenRequire","fire","set","setTimeout","message","callback","_done","lineCallback","_$el","height","$","outerHeight","displayedLineCallback","displayTextTime","displayWordTime","freezeLastLine","lastLineToTitle","plName","on","require","then"],"mappings":"CAAA,WACE,YAEAA,QAAOC,QAAQC,WAAW,oBAAqB,SAASC,EAAWC,EAAMC,EAAIC,EAAQC,GAWnF,QAASC,GAAMC,GACb,GAAIA,GAAYA,GAAYC,EAAW,CACrC,GAAIC,GAAUC,EAAcC,gBAAgB,EAE5CF,GAAQG,KAAK,SAEbJ,EAAYD,EACZG,EAAcG,IAAI,WAAW,GAC7BH,EAAcG,IAAI,eAAe,GACjCH,EAAcG,IAAI,cAAc,GAEhCC,WAAW,WACTL,EAAQG,KAAK,QACXG,QAASR,EAASQ,QAClBC,SAAUC,EACVC,aAAc,WACZR,EAAcG,IAAI,cAAeM,EAAKrB,OAAOsB,SAAWC,EAAEZ,EAAQN,IAAImB,eAAiB,GAEnFd,EAAUU,cACZV,EAAUU,aAAaT,IAG3Bc,sBAAuBf,EAAUe,uBAAyB,KAC1DC,gBAAiBhB,EAAUgB,iBAAoB,KAC/CC,gBAAiBjB,EAAUiB,iBAAmB,KAC9CC,eAAgBlB,EAAUkB,gBAAkBlB,EAAUmB,iBAAmB,QAE1E,MAIP,QAASV,KACP,MAAIT,GAAUkB,gBACRlB,EAAUH,MACZG,EAAUH,YAEZG,EAAY,OAILA,EAAUmB,iBACjBjB,EAAcG,IAAI,aAAc,cAE5BL,EAAUH,MACZG,EAAUH,OAEZG,EAAY,SAEZM,YAAW,WACTJ,EAAcG,IAAI,aAAc,cAChCH,EAAcG,IAAI,aAAc,MAC/B,OAKLH,EAAcG,IAAI,eAAe,OAEjCC,YAAW,WACTJ,EAAcG,IAAI,WAAW,GAC7BH,EAAcG,IAAI,eAAe,GAE7BL,EAAUH,MACZG,EAAUH,OAGZG,EAAY,MACX,MA5EL,GAAIE,GAAgBT,GACd2B,OAAQ,oBACR1B,KAAMA,IAERiB,GACErB,OAAQuB,EAAEvB,SAEZU,EAAY,IAwEhBE,GAAcmB,GAAG,aAAc,SAASb,GACtCN,EAAcG,IAAI,aAAc,kBAChCH,EAAcG,IAAI,aAAc,IAE5BG,GACFF,WAAW,WACTJ,EAAcG,IAAI,aAAc,IAEhCG,KACC,OAIPN,EAAcmB,GAAG,OAAQ,SAAStB,GAChCD,EAAMC,KAGRG,EAAcoB,UAAUC,KAAK1B","file":"screen-message/pl-screen-message.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  window.Ractive.controller('pl-screen-message', function(component, data, el, config, done) {\n\n    var screenMessage = component({\n          plName: 'pl-screen-message',\n          data: data\n        }),\n        _$el = {\n          window: $(window)\n        },\n        _playArgs = null;\n\n    function _play(playArgs) {\n      if (playArgs && playArgs != _playArgs) {\n        var Message = screenMessage.childrenRequire[0];\n\n        Message.fire('reset');\n\n        _playArgs = playArgs;\n        screenMessage.set('playing', true);\n        screenMessage.set('playingDone', false);\n        screenMessage.set('storyboard', false);\n\n        setTimeout(function() {\n          Message.fire('play', {\n            message: playArgs.message,\n            callback: _done,\n            lineCallback: function() {\n              screenMessage.set('messageTop', (_$el.window.height() - $(Message.el).outerHeight()) / 2);\n\n              if (_playArgs.lineCallback) {\n                _playArgs.lineCallback(Message);\n              }\n            },\n            displayedLineCallback: _playArgs.displayedLineCallback || null,\n            displayTextTime: _playArgs.displayTextTime ||  null,\n            displayWordTime: _playArgs.displayWordTime || null,\n            freezeLastLine: _playArgs.freezeLastLine || _playArgs.lastLineToTitle || null\n          });\n        }, 550);\n      }\n    }\n\n    function _done() {\n      if (_playArgs.freezeLastLine) {\n        if (_playArgs.done) {\n          _playArgs.done();\n        }\n        _playArgs = null;\n\n        return;\n      }\n      else if (_playArgs.lastLineToTitle) {\n        screenMessage.set('storyboard', 'sb-title-1');\n\n        if (_playArgs.done) {\n          _playArgs.done();\n        }\n        _playArgs = null;\n\n        setTimeout(function() {\n          screenMessage.set('storyboard', 'sb-title-2');\n          screenMessage.set('messageTop', 100);\n        }, 650);\n\n        return;\n      }\n\n      screenMessage.set('playingDone', true);\n\n      setTimeout(function() {\n        screenMessage.set('playing', false);\n        screenMessage.set('playingDone', false);\n\n        if (_playArgs.done) {\n          _playArgs.done();\n        }\n\n        _playArgs = null;\n      }, 350);\n    }\n\n    screenMessage.on('closeTitle', function(callback) {\n      screenMessage.set('storyboard', 'sb-title-out-1');\n      screenMessage.set('messageTop', 70);\n\n      if (callback) {\n        setTimeout(function() {\n          screenMessage.set('storyboard', '');\n\n          callback();\n        }, 550);\n      }\n    });\n\n    screenMessage.on('play', function(playArgs) {\n      _play(playArgs);\n    });\n\n    screenMessage.require().then(done);\n  });\n\n})();\n"],"sourceRoot":"/source/"}