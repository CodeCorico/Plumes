{"version":3,"sources":["screen-message/pl-screen-message.js"],"names":["window","Ractive","controller","component","data","el","config","done","_play","playArgs","_playArgs","Message","ScreenMessage","findChild","fire","setTimeout","set","message","callback","_done","lineCallback","_$el","height","$","outerHeight","displayedLineCallback","displayTextTime","displayWordTime","freezeLastLine","lastLineToTitle","plName","on","require","then"],"mappings":"CAAA,WACE,YAEAA,QAAOC,QAAQC,WAAW,oBAAqB,SAASC,EAAWC,EAAMC,EAAIC,EAAQC,GAWnF,QAASC,GAAMC,GACb,GAAIA,GAAYA,GAAYC,EAAW,CACrC,GAAIC,GAAUC,EAAcC,UAAU,OAAQ,sBAE9CF,GAAQG,KAAK,SAEbJ,EAAYD,EAEZM,WAAW,WACTH,EAAcI,IAAI,WAAW,GAC7BJ,EAAcI,IAAI,eAAe,GACjCJ,EAAcI,IAAI,aAAc,IAEhCD,WAAW,WACTJ,EAAQG,KAAK,QACXG,QAASR,EAASQ,QAClBC,SAAUC,EACVC,aAAc,WACZR,EAAcI,IAAI,cAAeK,EAAKrB,OAAOsB,SAAWC,EAAEZ,EAAQN,IAAImB,eAAiB,GAEnFd,EAAUU,cACZV,EAAUU,aAAaT,IAG3Bc,sBAAuBf,EAAUe,uBAAyB,KAC1DC,gBAAiBhB,EAAUgB,iBAAoB,KAC/CC,gBAAiBjB,EAAUiB,iBAAmB,KAC9CC,eAAgBlB,EAAUkB,gBAAkBlB,EAAUmB,iBAAmB,QAE1E,QAKT,QAASV,KACP,MAAIT,GAAUkB,gBACRlB,EAAUH,MACZG,EAAUH,YAEZG,EAAY,OAILA,EAAUmB,iBACjBjB,EAAcI,IAAI,aAAc,cAE5BN,EAAUH,MACZG,EAAUH,OAEZG,EAAY,SAEZK,YAAW,WACTH,EAAcI,IAAI,aAAc,cAChCJ,EAAcI,IAAI,aAAc,KAC/B,OAKLJ,EAAcI,IAAI,eAAe,OAEjCD,YAAW,WACTH,EAAcI,IAAI,WAAW,GAC7BJ,EAAcI,IAAI,eAAe,GAE7BN,EAAUH,MACZG,EAAUH,OAGZG,EAAY,MACX,MA/EL,GAAIE,GAAgBT,GACd2B,OAAQ,oBACR1B,KAAMA,IAERiB,GACErB,OAAQuB,EAAEvB,SAEZU,EAAY,IA2EhBE,GAAcmB,GAAG,aAAc,SAASb,GACtCN,EAAcI,IAAI,aAAc,kBAChCJ,EAAcI,IAAI,aAAc,IAE5BE,GACFH,WAAW,WACTH,EAAcI,IAAI,aAAc,IAEhCE,KACC,OAIPN,EAAcmB,GAAG,OAAQ,SAAStB,GAChCD,EAAMC,KAGRG,EAAcoB,UAAUC,KAAK1B","file":"screen-message/pl-screen-message.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  window.Ractive.controller('pl-screen-message', function(component, data, el, config, done) {\n\n    var ScreenMessage = component({\n          plName: 'pl-screen-message',\n          data: data\n        }),\n        _$el = {\n          window: $(window)\n        },\n        _playArgs = null;\n\n    function _play(playArgs) {\n      if (playArgs && playArgs != _playArgs) {\n        var Message = ScreenMessage.findChild('name', 'pl-messages-message');\n\n        Message.fire('reset');\n\n        _playArgs = playArgs;\n\n        setTimeout(function() {\n          ScreenMessage.set('playing', true);\n          ScreenMessage.set('playingDone', false);\n          ScreenMessage.set('storyboard', '');\n\n          setTimeout(function() {\n            Message.fire('play', {\n              message: playArgs.message,\n              callback: _done,\n              lineCallback: function() {\n                ScreenMessage.set('messageTop', (_$el.window.height() - $(Message.el).outerHeight()) / 2);\n\n                if (_playArgs.lineCallback) {\n                  _playArgs.lineCallback(Message);\n                }\n              },\n              displayedLineCallback: _playArgs.displayedLineCallback || null,\n              displayTextTime: _playArgs.displayTextTime ||  null,\n              displayWordTime: _playArgs.displayWordTime || null,\n              freezeLastLine: _playArgs.freezeLastLine || _playArgs.lastLineToTitle || null\n            });\n          }, 550);\n        });\n      }\n    }\n\n    function _done() {\n      if (_playArgs.freezeLastLine) {\n        if (_playArgs.done) {\n          _playArgs.done();\n        }\n        _playArgs = null;\n\n        return;\n      }\n      else if (_playArgs.lastLineToTitle) {\n        ScreenMessage.set('storyboard', 'sb-title-1');\n\n        if (_playArgs.done) {\n          _playArgs.done();\n        }\n        _playArgs = null;\n\n        setTimeout(function() {\n          ScreenMessage.set('storyboard', 'sb-title-2');\n          ScreenMessage.set('messageTop', 40);\n        }, 650);\n\n        return;\n      }\n\n      ScreenMessage.set('playingDone', true);\n\n      setTimeout(function() {\n        ScreenMessage.set('playing', false);\n        ScreenMessage.set('playingDone', false);\n\n        if (_playArgs.done) {\n          _playArgs.done();\n        }\n\n        _playArgs = null;\n      }, 350);\n    }\n\n    ScreenMessage.on('closeTitle', function(callback) {\n      ScreenMessage.set('storyboard', 'sb-title-out-1');\n      ScreenMessage.set('messageTop', 70);\n\n      if (callback) {\n        setTimeout(function() {\n          ScreenMessage.set('storyboard', '');\n\n          callback();\n        }, 550);\n      }\n    });\n\n    ScreenMessage.on('play', function(playArgs) {\n      _play(playArgs);\n    });\n\n    ScreenMessage.require().then(done);\n  });\n\n})();\n"],"sourceRoot":"/source/"}