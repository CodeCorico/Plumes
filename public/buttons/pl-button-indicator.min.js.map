{"version":3,"sources":["buttons/pl-button-indicator.js"],"names":["window","Ractive","controller","component","data","el","config","done","NOTIFICATION_DISPLAY_TIME","activeNotification","closeTimeout","ButtonIndicator","plName","$","extend","notificationDisplayTime","notificationsCount","action","userBehavior","get","pushNotification","message","picture","args","forceUncount","clearTimeout","set","setTimeout","fire","duration","width","close","clearNotificationsCount","on","event","original","stopPropagation"],"mappings":"CAAA,WACE,YAEAA,QAAOC,QAAQC,WAAW,sBAAuB,SAASC,EAAWC,EAAMC,EAAIC,EAAQC,GAErF,GAAIC,GAA4B,IAE5BC,EAAqB,KACrBC,EAAe,KACfC,EAAkBR,GAChBS,OAAQ,sBACRR,KAAMS,EAAEC,QAAO,GACbC,wBAAyBP,EACzBQ,mBAAoB,GACnBZ,GAEHa,OAAQ,SAASC,GACfA,IAAsC,mBAAhBA,KAA+BA,EAErD,IAAID,GAASN,EAAgBQ,IAAI,SAE7BF,IACFA,EAAO,KAAMN,EAAiBO,EAAcT,IAGhDW,iBAAkB,SAASC,EAASC,EAASC,EAAMC,GACjDf,GACEY,QAASA,EACTC,QAASA,GAAW,KACpBC,KAAMA,GAAQ,MAGZb,GACFe,aAAaf,GAGVc,GACHb,EAAgBe,IAAI,qBAAsBf,EAAgBQ,IAAI,sBAAwB,GAGxFR,EAAgBe,IAAI,sBAAuBL,GACvCC,GACFX,EAAgBe,IAAI,sBAAuBJ,GAG7CK,WAAW,WACThB,EAAgBe,IAAI,eAAe,GAEnCf,EAAgBiB,KAAK,oBACnBC,SAAU,IACVC,MAAO,MAGTH,WAAW,WACThB,EAAgBoB,SACfpB,EAAgBQ,IAAI,+BAG3BY,MAAO,WACApB,EAAgBQ,IAAI,iBAIzBV,EAAqB,KACrBE,EAAgBe,IAAI,eAAe,GAEnCf,EAAgBiB,KAAK,oBACnBC,SAAU,IACVC,MAAO,KAGTH,WAAW,WACThB,EAAgBe,IAAI,sBAAuB,OAC1C,OAELM,wBAAyB,WACvBrB,EAAgBe,IAAI,qBAAsB,KAI9CtB,GAAKa,QACPN,EAAgBsB,GAAG,SAAU,SAASC,GACpC9B,EAAKa,OAAOiB,EAAOvB,GAAiB,EAAMF,GAC1CyB,EAAMC,SAASC,oBAInB7B","file":"buttons/pl-button-indicator.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  window.Ractive.controller('pl-button-indicator', function(component, data, el, config, done) {\n\n    var NOTIFICATION_DISPLAY_TIME = 6000,\n\n        activeNotification = null,\n        closeTimeout = null,\n        ButtonIndicator = component({\n          plName: 'pl-button-indicator',\n          data: $.extend(true, {\n            notificationDisplayTime: NOTIFICATION_DISPLAY_TIME,\n            notificationsCount: 0\n          }, data),\n\n          action: function(userBehavior) {\n            userBehavior = typeof userBehavior == 'undefined' || userBehavior ? true : false;\n\n            var action = ButtonIndicator.get('action');\n\n            if (action) {\n              action(null, ButtonIndicator, userBehavior, activeNotification);\n            }\n          },\n          pushNotification: function(message, picture, args, forceUncount) {\n            activeNotification = {\n              message: message,\n              picture: picture || null,\n              args: args || null\n            };\n\n            if (closeTimeout) {\n              clearTimeout(closeTimeout);\n            }\n\n            if (!forceUncount) {\n              ButtonIndicator.set('notificationsCount', ButtonIndicator.get('notificationsCount') + 1);\n            }\n\n            ButtonIndicator.set('notificationMessage', message);\n            if (picture) {\n              ButtonIndicator.set('notificationPicture', picture);\n            }\n\n            setTimeout(function() {\n              ButtonIndicator.set('showMessage', true);\n\n              ButtonIndicator.fire('showNotification', {\n                duration: 1000,\n                width: 250\n              });\n\n              setTimeout(function() {\n                ButtonIndicator.close();\n              }, ButtonIndicator.get('notificationDisplayTime'));\n            });\n          },\n          close: function() {\n            if (!ButtonIndicator.get('showMessage')) {\n              return;\n            }\n\n            activeNotification = null;\n            ButtonIndicator.set('showMessage', false);\n\n            ButtonIndicator.fire('hideNotification', {\n              duration: 1000,\n              width: 50\n            });\n\n            setTimeout(function() {\n              ButtonIndicator.set('notificationPicture', null);\n            }, 700);\n          },\n          clearNotificationsCount: function() {\n            ButtonIndicator.set('notificationsCount', 0);\n          }\n        });\n\n    if (data.action) {\n      ButtonIndicator.on('action', function(event) {\n        data.action(event, ButtonIndicator, true, activeNotification);\n        event.original.stopPropagation();\n      });\n    }\n\n    done();\n  });\n\n})();\n"],"sourceRoot":"/source/"}