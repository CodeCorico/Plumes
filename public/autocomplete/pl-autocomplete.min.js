!function(){"use strict";window.Ractive.controller("pl-autocomplete",function(t,e,i,l,o){function n(){var t=c.input.offset().top,e=c.input.outerWidth(),i=c.input.outerHeight();a.set("inEdition",a.get("focused")&&a.get("list")&&a.get("list").length),a.set("listWidth",e),a.set("listHeight",a.get("focused")?c.listContent.outerHeight():0),t+(i-2)+a.get("listHeight")>c.window.height()?(a.set("listFromBottom",!0),a.set("listTop",-a.get("listHeight")+2)):(a.set("listFromBottom",!1),a.set("listTop",i-2)),a.set("selectionWidth",e)}function s(){var t=a.get("select");t&&t(event,c.input.val()),c.input.blur()}function u(){var t=a.get("change");t&&t(event,c.input.val())}var a=t({plName:"pl-autocomplete",data:$.extend(!0,{focused:!1,inEdition:!1,listfocused:-1,listTop:0,listWidth:0,listHeight:0,selection:""},e),partials:$.extend(!0,{templateDefault:["<div ","class=\"pl-autocomplete-list-item {{listfocused == @index ? 'focused' : ''}}\" ",'on-mousedown="selectListItem"',">","{{{display}}}","</div>"].join("")},l.partials),refresh:function(){n()}}),c={window:$(window),input:$(a.el).find(".pl-autocomplete-input"),selection:$(a.el).find(".pl-autocomplete-selection"),list:$(a.el).find(".pl-autocomplete-list"),listContent:$(a.el).find(".pl-autocomplete-list-content")};a.partials.template=a.partials.template||a.partials.templateDefault,a.on("selectListItem",function(t){t.original.stopPropagation(),t.original.preventDefault(),c.input.val(t.context.value),u()}),a.on("inputFocus",function(t){a.set("focused",!0),n();var e=a.get("focus");e&&e(t,c.input.val())}),a.on("inputBlur",function(t){a.set("focused",!1),n();var e=a.get("blur");e&&e(t,c.input.val())}),a.on("inputKeyup",function(t){var e=t.original.charCode?t.original.charCode:t.original.keyCode,i=a.get("selection"),l=a.get("list"),o=a.get("listfocused");return 39==e&&i?(c.input.val(i),void u()):(38==e||40==e)&&l&&l.length?(o+=38==e?-1:1,o=-2==o?l.length-1:o,o=o==l.length?-1:o,void a.set("listfocused",o)):13==e?void(l&&l.length&&-1!==o?l&&l.length&&l[o]&&(c.input.val(l[o].value),a.set("listfocused",-1),u()):s()):void u()}),a.observe("list",function(t){a.set("selection",t&&t.length&&t[0].value||""),a.set("listfocused",-1),setTimeout(n)}),o()})}();
//# sourceMappingURL=pl-autocomplete.min.js.map
