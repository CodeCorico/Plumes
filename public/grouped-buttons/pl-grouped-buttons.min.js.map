{"version":3,"sources":["grouped-buttons/pl-grouped-buttons.js"],"names":["window","Ractive","controller","component","data","el","config","done","_registerIndicatorEvents","buttonEl","button","i","on","args","GroupedButtons","set","width","plName","$","extend","orientaton","buttons","positions","action","event","node","index","parseInt","parent","attr","get","findChild","fire","observe","require","then","totalWidth","length","isReady","type","ready"],"mappings":"CAAA,WACE,YAEAA,QAAOC,QAAQC,WAAW,qBAAsB,SAASC,EAAWC,EAAMC,EAAIC,EAAQC,GAoCpF,QAASC,GAAyBC,EAAUC,EAAQC,GAClDF,EAASG,GAAG,mBAAoB,SAASC,GACvCC,EAAeC,IAAI,WAAaJ,EAAI,UAAWE,EAAKG,MAAQ,MAG9DP,EAASG,GAAG,mBAAoB,WAC9BE,EAAeC,IAAI,WAAaJ,EAAI,UAAW,MAxCnD,GAAIG,GAAiBX,GACnBc,OAAQ,qBACRb,KAAMc,EAAEC,QAAO,GACbC,WAAY,OACZC,WACAC,aACAC,OAAQ,SAASC,GACf,GAAKA,GAAUA,EAAMC,KAArB,CAIA,GAAIC,GAAQC,SAAST,EAAEM,EAAMC,MAAMG,SAASC,KAAK,cAAe,IAC5DnB,EAASI,EAAegB,IAAI,WAAaJ,EAAQ,KACjDvB,EAAYW,EAAeiB,UAAU,aAAcL,EAEvDZ,GAAekB,KAAK,gBAClBR,MAAOA,EACPd,OAAQA,EACRP,UAAWA,IAGTO,GAAUA,EAAOa,QACnBb,EAAOa,OAAOC,EAAOrB,GAGvBW,EAAekB,KAAK,UAClBR,MAAOA,EACPd,OAAQA,EACRP,UAAWA,OAGdC,IAaLU,GAAemB,QAAQ,UAAW,WAChCnB,EAAeoB,UAAUC,KAAK,WAK5B,IAAK,GAJDd,GAAUP,EAAegB,IAAI,WAC7BR,EAAYR,EAAegB,IAAI,aAC/BM,EAAa,EAERzB,EAAIU,EAAQgB,OAAS,EAAG1B,GAAK,EAAGA,IAAK,CAC5C,GAAID,GAASW,EAAQV,GACjBF,EAAWK,EAAeiB,UAAU,aAAcpB,EAItD,IAFAW,EAAUX,GAAKyB,GAEV3B,EACH,MAGGC,GAAO4B,UACV5B,EAAO4B,SAAU,EACjB5B,EAAOM,MAAuB,aAAfN,EAAO6B,KAAsB,GAAK,GAE9B,aAAf7B,EAAO6B,MACT/B,EAAyBC,EAAUC,EAAQC,GAGzCD,EAAO8B,OACT9B,EAAO8B,MAAM/B,IAIjB2B,GAAc1B,EAAOM,OAAS,EAGhCF,EAAeC,IAAI,YAAaO,OAIpCf","file":"grouped-buttons/pl-grouped-buttons.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  window.Ractive.controller('pl-grouped-buttons', function(component, data, el, config, done) {\n\n    var GroupedButtons = component({\n      plName: 'pl-grouped-buttons',\n      data: $.extend(true, {\n        orientaton: 'left',\n        buttons: [],\n        positions: [],\n        action: function(event) {\n          if (!event || !event.node) {\n            return;\n          }\n\n          var index = parseInt($(event.node).parent().attr('data-index'), 10),\n              button = GroupedButtons.get('buttons[' + index + ']'),\n              component = GroupedButtons.findChild('data-index', index);\n\n          GroupedButtons.fire('beforeAction', {\n            event: event,\n            button: button,\n            component: component\n          });\n\n          if (button && button.action) {\n            button.action(event, component);\n          }\n\n          GroupedButtons.fire('action', {\n            event: event,\n            button: button,\n            component: component\n          });\n        }\n      }, data)\n    });\n\n    function _registerIndicatorEvents(buttonEl, button, i) {\n      buttonEl.on('showNotification', function(args) {\n        GroupedButtons.set('buttons[' + i + '].width', args.width + 10);\n      });\n\n      buttonEl.on('hideNotification', function() {\n        GroupedButtons.set('buttons[' + i + '].width', 55);\n      });\n    }\n\n    GroupedButtons.observe('buttons', function() {\n      GroupedButtons.require().then(function() {\n        var buttons = GroupedButtons.get('buttons'),\n            positions = GroupedButtons.get('positions'),\n            totalWidth = 0;\n\n        for (var i = buttons.length - 1; i >= 0; i--) {\n          var button = buttons[i],\n              buttonEl = GroupedButtons.findChild('data-index', i);\n\n          positions[i] = totalWidth;\n\n          if (!buttonEl) {\n            return;\n          }\n\n          if (!button.isReady) {\n            button.isReady = true;\n            button.width = button.type == 'indicator' ? 55 : 50;\n\n            if (button.type == 'indicator') {\n              _registerIndicatorEvents(buttonEl, button, i);\n            }\n\n            if (button.ready) {\n              button.ready(buttonEl);\n            }\n          }\n\n          totalWidth += button.width || 0;\n        }\n\n        GroupedButtons.set('positions', positions);\n      });\n    });\n\n    done();\n  });\n\n})();\n"],"sourceRoot":"/source/"}