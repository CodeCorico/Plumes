{"version":3,"sources":["login/login.js"],"names":["window","Ractive","controller","component","data","el","config","done","_refresh","messageHeight","_$el","message","outerHeight","Login","set","height","_focusName","login","find","focus","_modal","type","clearUsername","clearUserpassword","callback","setTimeout","texts","username","userpassword","_error","_success","_submit","get","fire","password","confirmPassword","code","_close","shouldDestroy","teardown","_resize","storyboard","$","useforgot","each","name","value","substr","length","avatar","inForgot","usernamePlaceholder","userpasswordPlaceholder","userpasswordconfirm","forgotlink","forgottext","forgotcodetext","forgotpasswordtext","extend","show","top","keypress","event","which","preventDefault","stopPropagation","lastObserveUsernameDate","Date","observe","getTime","oldValue","on","off","text","ScreenMessage","childrenRequire","args","inForgotCode","inForgotPassword","resize","require","then","textQuestion","lastLineToTitle","displayTextTime","offset"],"mappings":"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","file":"login/login.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  window.Ractive.controller('login', function(component, data, el, config, done) {\n\n    var _$el = {\n          window: $(window),\n          login: null\n        };\n\n    data.useforgot = typeof data.useforgot == 'undefined' ? true : data.useforgot;\n    data.useforgot = data.useforgot == 'true' ? true : data.useforgot;\n    data.useforgot = data.useforgot == 'false' ? false : data.useforgot;\n\n    data.texts = {};\n\n    $.each(data, function(name, value) {\n      if (name.substr(0, 5) == 'text-') {\n        name = name.substr(5, name.length - 5);\n        data.texts[name] = value;\n      }\n    });\n\n    data.avatar = !data.avatar ? 'null' : data.avatar;\n    data.inForgot = false;\n\n    data.texts.username = typeof data.texts.username == 'undefined' ? 'Name' : data.texts.username;\n    data.usernamePlaceholder = data.texts.username;\n    data.texts.code = typeof data.texts.code == 'undefined' ? 'Code' : data.texts.code;\n    data.texts.userpassword = typeof data.texts.userpassword == 'undefined' ? 'Password' : data.texts.userpassword;\n    data.userpasswordPlaceholder = data.texts.userpassword;\n    data.texts.userpasswordconfirm = typeof data.texts.userpasswordconfirm == 'undefined' ? 'Confirm password' : data.texts.userpasswordconfirm;\n    data.texts.forgotlink = typeof data.texts.forgotlink == 'undefined' ? 'I forgot my password' : data.texts.forgotlink;\n    data.texts.login = typeof data.texts.login == 'undefined' ? 'Back to login' : data.texts.login;\n    data.texts.forgottext = typeof data.texts.forgottext == 'undefined' ?\n      'Submit your email and press <span class=\"key\">ENTER</span> to receive a validation code in your mailbox.' :\n      data.texts.forgottext;\n    data.texts.forgotcodetext = typeof data.texts.forgotcodetext == 'undefined' ?\n      'Use your <strong>validation code</strong> and press <span class=\"key\">ENTER</span> to get the possibility to change your password.' :\n      data.texts.forgotcodetext;\n    data.texts.forgotpasswordtext = typeof data.texts.forgotpasswordtext == 'undefined' ?\n      'Enter your new password twice (to confirm) and press <span class=\"key\">ENTER</span> to change your password.' :\n      data.texts.forgotpasswordtext;\n\n    function _refresh() {\n      var messageHeight = _$el.message.outerHeight(true);\n\n      Login.set('height', _$el.window.height() - (100 + messageHeight + 30));\n    }\n\n    var Login = component({\n      data: $.extend(true, {\n        show: false,\n        top: 0\n      }, data)\n    });\n\n    _$el.login = $(Login.el);\n\n    function _focusName() {\n      _$el.login.find('.name').focus();\n    }\n\n    function _modal(message, type, clearUsername, clearUserpassword, callback) {\n      Login.set('inModal', true);\n      Login.set('message', message);\n      Login.set('messageType', type);\n      Login.set('storyboardMessage', 'sb-message-1');\n\n      setTimeout(function() {\n        if (clearUsername) {\n          Login.set('username', '');\n        }\n        if (clearUserpassword) {\n          Login.set('userpassword', '');\n        }\n\n        if (type == 'success') {\n          Login.set('usernamePlaceholder', data.texts.username);\n          Login.set('userpasswordPlaceholder', data.texts.userpassword);\n        }\n\n        Login.set('storyboardMessage', 'sb-message-2');\n        setTimeout(function() {\n          Login.set('storyboardMessage', 'sb-message-3');\n          setTimeout(function() {\n            Login.set('storyboardMessage', 'sb-message-4');\n            setTimeout(function() {\n              Login.set('storyboardError', null);\n              Login.set('inModal', false);\n\n              if (callback) {\n                callback();\n              }\n            }, 350);\n          }, 250);\n        }, 3000);\n      }, 250);\n    }\n\n    function _error(message, clearUsername, clearUserpassword, callback) {\n      _modal(message, 'error', clearUsername, clearUserpassword, callback);\n    }\n\n    function _success(message, callback) {\n      _modal(message, 'success', true, true, callback);\n    }\n\n    function _submit() {\n      if (Login.get('inForgotPassword')) {\n        Login.fire('forgotPassword', {\n          password: Login.get('username'),\n          confirmPassword: Login.get('userpassword')\n        });\n      }\n      else if (Login.get('inForgotCode')) {\n        Login.fire('forgotCode', {\n          code: Login.get('username')\n        });\n      }\n      else if (Login.get('inForgot')) {\n        Login.fire('forgot', {\n          username: Login.get('username')\n        });\n      }\n      else {\n        Login.fire('login', {\n          username: Login.get('username'),\n          userpassword: Login.get('userpassword')\n        });\n      }\n    }\n\n    _$el.login.find('.login-form-content .input').keypress(function(event) {\n      // enter\n      if (event.which == 13) {\n        _submit();\n\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    });\n\n    var lastObserveUsernameDate = new Date();\n\n    Login.observe('username', function() {\n      if (Login.get('inForgotCode') || Login.get('inForgotPassword')) {\n        return;\n      }\n\n      lastObserveUsernameDate = new Date();\n\n      var username = Login.get('username');\n\n      setTimeout(function() {\n        if (new Date().getTime() - lastObserveUsernameDate.getTime() >= 1000) {\n          Login.fire('username', {\n            username: username\n          });\n        }\n      }, 1000);\n    });\n\n    Login.observe('avatar', function(value, oldValue) {\n      if (oldValue == value) {\n        return;\n      }\n      if (!value) {\n        value = 'null';\n        Login.set('avatar', value);\n        if (oldValue == 'null') {\n          return;\n        }\n      }\n\n      Login.set('oldAvatar', oldValue);\n      setTimeout(function() {\n        Login.set('oldAvatar', null);\n      }, 650);\n    });\n\n    Login.on('teardown', function() {\n      Login = null;\n      _$el.window.off('resize', _resize);\n    });\n\n    function _close() {\n      Login.fire('closed');\n\n      if (Login && !Login.shouldDestroy) {\n        Login.teardown();\n      }\n    }\n\n    Login.on('logged', function(text) {\n      var ScreenMessage = Login.childrenRequire[0];\n      ScreenMessage.fire('closeTitle');\n\n      Login.set('storyboard', 'sb-hide-1');\n\n      Login.set('top', 0);\n      Login.set('height', _$el.window.height());\n\n      setTimeout(function() {\n        Login.set('storyboard', 'sb-hide-2');\n\n        setTimeout(function() {\n          Login.set('storyboard', 'sb-hide-3');\n\n          setTimeout(function() {\n\n            if (text) {\n              ScreenMessage.fire('play', {\n                message: text,\n                done: function() {\n                  _close();\n                }\n              });\n            }\n            else {\n              _close();\n            }\n          }, 150);\n        }, 400);\n      }, 350);\n    });\n\n    Login.on('close', _close);\n\n    Login.on('error', function(args) {\n      args = $.extend(true, {\n        message: 'You have an error in your credentials.',\n        clearUsername: false,\n        clearUserpassword: true\n      }, args || {});\n\n      _error(args.message, args.clearUsername, args.clearUserpassword, _focusName);\n    });\n\n    Login.on('displayForgot', function() {\n      Login.set('inForgot', true);\n      Login.fire('enterForgot');\n\n      setTimeout(_focusName);\n    });\n\n    Login.on('displayLogin', function() {\n      var inForgot = Login.get('inForgot'),\n          inForgotCode = Login.get('inForgotCode'),\n          inForgotPassword = Login.get('inForgotPassword');\n\n      if (inForgotCode || inForgotPassword) {\n        Login.set('username', '');\n        Login.set('userpassword', '');\n      }\n\n      Login.set('inForgot', false);\n      Login.set('inForgotCode', false);\n      Login.set('inForgotPassword', false);\n      Login.set('usernamePlaceholder', data.texts.username);\n      Login.set('userpasswordPlaceholder', data.texts.userpassword);\n\n      if (inForgotCode) {\n        Login.fire('exitForgotCode');\n      }\n\n      if (inForgotPassword) {\n        Login.fire('exitForgotPassword');\n      }\n\n      if (inForgot) {\n        Login.fire('exitForgot');\n      }\n\n      setTimeout(_focusName);\n    });\n\n    Login.on('forgotSuccess', function() {\n      Login.set('inForgotCode', true);\n      Login.set('username', '');\n      Login.set('usernamePlaceholder', data.texts.code);\n\n      Login.fire('enterForgotCode');\n\n      setTimeout(_focusName);\n    });\n\n    Login.on('forgotError', function(args) {\n      args = $.extend(true, {\n        message: 'This email address doesn\\'t exist.',\n        clearUsername: false,\n        clearUserpassword: false\n      }, args || {});\n\n      _error(args.message, args.clearUsername, args.clearUserpassword, _focusName);\n    });\n\n    Login.on('forgotCodeSuccess', function() {\n      Login.set('inForgotCode', false);\n      Login.set('inForgotPassword', true);\n      Login.set('username', '');\n      Login.set('usernamePlaceholder', data.texts.userpassword);\n      Login.set('userpassword', '');\n      Login.set('userpasswordPlaceholder', data.texts.userpasswordconfirm);\n\n      Login.fire('enterForgotPassword');\n\n      setTimeout(_focusName);\n    });\n\n    Login.on('forgotCodeError', function(args) {\n      args = $.extend(true, {\n        message: 'Code invalid.',\n        clearUsername: true,\n        clearUserpassword: false\n      }, args || {});\n\n      _error(args.message, args.clearUsername, args.clearUserpassword, _focusName);\n    });\n\n    Login.on('forgotPasswordSuccess', function(args) {\n      args = $.extend(true, {\n        message: 'New password registered.'\n      }, args || {});\n\n      _success(args.message, function() {\n        Login.fire('displayLogin');\n      });\n    });\n\n    Login.on('forgotPasswordError', function(args) {\n      args = $.extend(true, {\n        message: 'Passwords are invalid.',\n        clearUsername: true,\n        clearUserpassword: true\n      }, args || {});\n\n      _error(args.message, args.clearUsername, args.clearUserpassword, _focusName);\n    });\n\n    function _resize() {\n      if (!Login) {\n        return;\n      }\n\n      var storyboard = Login.get('storyboard');\n\n      if (storyboard == 'sb-show-2' || storyboard == 'sb-show-3' || storyboard == 'sb-show-4') {\n        _refresh();\n      }\n    }\n\n    _$el.window.resize(_resize);\n\n    Login.require().then(function() {\n      var ScreenMessage = Login.childrenRequire[0],\n          textQuestion = Login.get('texts.question');\n\n      textQuestion = !textQuestion && textQuestion !== '' ? 'Who are you?' : textQuestion;\n\n      ScreenMessage.fire('play', {\n        message: textQuestion,\n        lastLineToTitle: true,\n        displayTextTime: 350,\n        done: function() {\n          _$el.message = $(ScreenMessage.el).find('.screen-message-message');\n\n          var messageHeight = _$el.message.outerHeight(true);\n\n          Login.set('top', _$el.message.offset().top + messageHeight - 1);\n          Login.set('height', 1);\n          Login.set('storyboard', 'sb-show-1');\n\n          setTimeout(function() {\n            Login.set('storyboard', 'sb-show-2');\n            Login.set('top', 100 + messageHeight);\n            _refresh();\n\n            setTimeout(function() {\n              Login.set('storyboard', 'sb-show-3');\n\n              setTimeout(function() {\n                _$el.login.find(!data.username ? '.name' : '.password').focus();\n                Login.set('storyboard', 'sb-show-4');\n              }, 450);\n\n            }, 450);\n          }, 650);\n        }\n      });\n\n      done();\n    });\n\n  });\n\n})();\n"],"sourceRoot":"/source/"}