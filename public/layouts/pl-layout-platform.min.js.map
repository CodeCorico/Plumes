{"version":3,"sources":["layouts/pl-layout-platform.js"],"names":["window","Ractive","controller","component","data","el","config","done","_resize","openOrientation","screenWidth","_$el","width","screen","LayoutPlatform","get","contentMedia","VIEWS","DESKTOP","set","_groupedButtons","left","defaultMode","right","_useFullscreen","_removeFullscreenButton","_contexts","close","TABLET","MOBILE","compactMode","_addFullscreenButton","templateWidth","contentTemplate","outerWidth","_updateTitlePosition","fire","setTimeout","usefullscreen","usefullscreendesktop","_closeContext","orientation","userBehavior","panel","findChild","_hasFullscreenButton","buttonsRight","index","i","length","unshift","pl-layout-name","icon","document","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","action","button","$i","$","node","find","exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","className","fullscreen","body","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","update","splice","_registerGroupedButtonsEvents","on","_beforeButtonsAction","_beforeButtonsCompact","show","_registerContextEvents","event","opened","group","attr","buttons","buttonsEls","childrenRequire","buttonIndex","removeClass","args","$group","_displayContextGroup","context","$context","addClass","title","open","beforeGroup","callback","forEach","hasClass","isOpened","closeContent","beforeContext","titleText","_updateTitleArea","height","titleWidth","Title","plName","extend","loaded","titleShowed","titleLeft","titleLeftOffset","titleBgLeftOffset","titleBgWidth","titleBgHeight","buttonsleft","buttonsright","contextlefttitle","contextrighttitle","contextleftusetitle","contextrightusetitle","leftContextWidth","rightContextWidth","leftContextOpened","rightContextOpened","contentLeft","contentRight","crossleftcontext","crossrightcontext","leftGroupedButtons","rightGroupedButtons","leftContext","rightContext","closeOnNotDesktop","groups","closeIfGroupOpened","Page","parentRequire","platform","content","Plumes","bindUses","observe","value","resize","off","selectApp","name","fireFunc","addApp","app","indexOrPosition","addTitle","removeApp","removeTitle","onloaded","beforeRequire","beforerequire","layout","require","then","cls","filter","indexOf","push","toLowerCase","replace","fireSelected","remove"],"mappings":"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","file":"layouts/pl-layout-platform.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  window.Ractive.controller('pl-layout-platform', function(component, data, el, config, done) {\n    var VIEWS = {\n          DESKTOP: 1000,\n          TABLET: 450,\n          MOBILE: 0\n        },\n\n        Title = null,\n        _groupedButtons = {\n          left: null,\n          right: null\n        },\n        _contexts = {\n          left: null,\n          right: null\n        };\n\n    function _resize(openOrientation) {\n      var screenWidth = _$el.window.width(),\n          screen = LayoutPlatform.get('screen'),\n          contentMedia = LayoutPlatform.get('contentMedia');\n\n      if (screenWidth >= VIEWS.DESKTOP) {\n        LayoutPlatform.set('leftContextWidth', LayoutPlatform.get('leftContextOpened') ? '25%' : 0);\n        LayoutPlatform.set('rightContextWidth', LayoutPlatform.get('rightContextOpened') ? '25%' : 0);\n\n        LayoutPlatform.set('contentLeft', LayoutPlatform.get('leftContextOpened') ? '25%' : 0);\n        LayoutPlatform.set('contentRight', LayoutPlatform.get('rightContextOpened') ? '25%' : 0);\n\n        if (_groupedButtons.left) {\n          _groupedButtons.left.defaultMode();\n        }\n        if (_groupedButtons.right) {\n          if (_useFullscreen() == 'mobile') {\n            _removeFullscreenButton();\n          }\n          _groupedButtons.right.defaultMode();\n        }\n\n        LayoutPlatform.set('screen', 'screen-desktop');\n      }\n      else {\n        if (openOrientation == 'left' && LayoutPlatform.get('rightContextOpened')) {\n          _contexts.right.close(null, false);\n          LayoutPlatform.set('rightContextOpened', false);\n        }\n        else if (openOrientation == 'right' && LayoutPlatform.get('leftContextOpened')) {\n          _contexts.left.close(null, false);\n          LayoutPlatform.set('leftContextOpened', false);\n        }\n        else if (LayoutPlatform.get('leftContextOpened') && LayoutPlatform.get('rightContextOpened')) {\n          _contexts.right.close(null, false);\n          LayoutPlatform.set('rightContextOpened', false);\n        }\n\n        if (screenWidth >= VIEWS.TABLET) {\n          LayoutPlatform.set('leftContextWidth', LayoutPlatform.get('leftContextOpened') ? '75%' : 0);\n          LayoutPlatform.set('rightContextWidth', LayoutPlatform.get('rightContextOpened') ? '75%' : 0);\n\n          LayoutPlatform.set('contentLeft',\n            LayoutPlatform.get('leftContextOpened') ? '75%' : (\n            LayoutPlatform.get('rightContextOpened') ? '-75%' : 0)\n          );\n          LayoutPlatform.set('contentRight',\n            LayoutPlatform.get('rightContextOpened') ? '75%' : (\n            LayoutPlatform.get('leftContextOpened') ? '-75%' : 0)\n          );\n\n          if (_groupedButtons.left) {\n            _groupedButtons.left.defaultMode();\n          }\n          if (_groupedButtons.right) {\n            if (_useFullscreen() == 'mobile') {\n              _removeFullscreenButton();\n            }\n            _groupedButtons.right.defaultMode();\n          }\n\n          LayoutPlatform.set('screen', 'screen-tablet');\n        }\n        else if (screenWidth >= VIEWS.MOBILE) {\n          LayoutPlatform.set('leftContextWidth', LayoutPlatform.get('leftContextOpened') ? '100%' : 0);\n          LayoutPlatform.set('rightContextWidth', LayoutPlatform.get('rightContextOpened') ? '100%' : 0);\n\n          LayoutPlatform.set('contentLeft', 0);\n          LayoutPlatform.set('contentRight', 0);\n\n          if (_groupedButtons.left) {\n            _groupedButtons.left.compactMode();\n          }\n          if (_groupedButtons.right) {\n            if (_useFullscreen() == 'mobile') {\n              _addFullscreenButton();\n            }\n\n            _groupedButtons.right.compactMode();\n          }\n\n          LayoutPlatform.set('screen', 'screen-mobile');\n        }\n      }\n\n      var templateWidth = _$el.contentTemplate.outerWidth();\n\n      if (templateWidth >= VIEWS.DESKTOP) {\n        LayoutPlatform.set('contentMedia', 'media-desktop');\n      }\n      else if (templateWidth >= VIEWS.TABLET) {\n        LayoutPlatform.set('contentMedia', 'media-tablet');\n      }\n      else if (templateWidth >= VIEWS.MOBILE) {\n        LayoutPlatform.set('contentMedia', 'media-mobile');\n      }\n\n      _updateTitlePosition();\n\n      if (screen != LayoutPlatform.get('screen')) {\n        LayoutPlatform.fire('screen', {\n          screen: LayoutPlatform.get('screen')\n        });\n\n        setTimeout(function() {\n          LayoutPlatform.fire('afterScreen', {\n            screen: LayoutPlatform.get('screen')\n          });\n        }, 250);\n      }\n\n      if (contentMedia != LayoutPlatform.get('contentMedia')) {\n        LayoutPlatform.fire('contentMedia', {\n          contentMedia: LayoutPlatform.get('contentMedia')\n        });\n\n        setTimeout(function() {\n          LayoutPlatform.fire('afterContentMedia', {\n            contentMedia: LayoutPlatform.get('contentMedia')\n          });\n        }, 250);\n      }\n\n      LayoutPlatform.fire('resize');\n\n      setTimeout(function() {\n        LayoutPlatform.fire('afterResize');\n      }, 250);\n    }\n\n    function _useFullscreen() {\n      var usefullscreen = LayoutPlatform.get('usefullscreen');\n      usefullscreen = typeof usefullscreen == 'undefined' || usefullscreen == 'true' || usefullscreen === true || false;\n\n      var usefullscreendesktop = LayoutPlatform.get('usefullscreendesktop');\n      usefullscreendesktop = usefullscreendesktop == 'true' || usefullscreendesktop === true || false;\n\n      return usefullscreen && usefullscreendesktop ? 'desktop' : (usefullscreen && !usefullscreendesktop ? 'mobile' : false);\n    }\n\n    function _closeContext(orientation, userBehavior) {\n      var panel = LayoutPlatform.findChild('data-pl-name', 'context-' + orientation);\n\n      panel.close(null, userBehavior);\n    }\n\n    function _hasFullscreenButton() {\n      var buttonsRight = LayoutPlatform.get('buttonsright') || [],\n          index = -1;\n\n      for (var i = 0; i < buttonsRight.length; i++) {\n        if (buttonsRight[i]['pl-layout-name'] && buttonsRight[i]['pl-layout-name'] == 'fullscreen') {\n          index = i;\n\n          break;\n        }\n      }\n\n      return index;\n    }\n\n    function _addFullscreenButton() {\n      var index = _hasFullscreenButton();\n\n      if (index > -1) {\n        return;\n      }\n\n      var buttonsRight = LayoutPlatform.get('buttonsright') || [];\n\n      buttonsRight.unshift({\n        'pl-layout-name': 'fullscreen',\n        icon:\n          document.fullscreenElement ||\n          document.webkitFullscreenElement ||\n          document.mozFullScreenElement ||\n          document.msFullscreenElement ?\n          'fa fa-compress' :\n          'fa fa-expand',\n        action: function(button) {\n          var $i = $(button.node).find('i');\n\n          if (\n            document.fullscreenElement ||\n            document.webkitFullscreenElement ||\n            document.mozFullScreenElement ||\n            document.msFullscreenElement\n          ) {\n            if (document.exitFullscreen) {\n              document.exitFullscreen();\n            }\n            else if (document.webkitExitFullscreen) {\n              document.webkitExitFullscreen();\n            }\n            else if (document.mozCancelFullScreen) {\n              document.mozCancelFullScreen();\n            }\n            else if (document.msExitFullscreen) {\n              document.msExitFullscreen();\n            }\n\n            $i[0].className = 'fa fa-expand';\n\n            LayoutPlatform.fire('fullscreen', {\n              fullscreen: false\n            });\n          }\n          else {\n            if (document.body.requestFullscreen) {\n              document.body.requestFullscreen();\n            }\n            else if (document.body.webkitRequestFullscreen) {\n              document.body.webkitRequestFullscreen();\n            }\n            else if (document.body.mozRequestFullScreen) {\n              document.body.mozRequestFullScreen();\n            }\n            else if (document.body.msRequestFullscreen) {\n              document.body.msRequestFullscreen();\n            }\n\n            $i[0].className = 'fa fa-compress';\n\n            LayoutPlatform.fire('fullscreen', {\n              fullscreen: true\n            });\n          }\n        }\n      });\n\n      LayoutPlatform.update('buttonsright');\n    }\n\n    function _removeFullscreenButton() {\n      var index = _hasFullscreenButton();\n\n      if (index < 0) {\n        return;\n      }\n\n      var buttonsRight = LayoutPlatform.get('buttonsright') || [];\n\n      buttonsRight.splice(index, 1);\n\n      LayoutPlatform.update('buttonsright');\n    }\n\n    function _registerGroupedButtonsEvents(orientation, component) {\n      _groupedButtons[orientation] = component;\n\n      component.on('beforeAction', _beforeButtonsAction);\n      component.on('beforeCompact', _beforeButtonsCompact);\n\n      _resize();\n\n      _groupedButtons[orientation].show();\n\n      if (orientation == 'right' && _useFullscreen() == 'desktop') {\n        _addFullscreenButton();\n      }\n    }\n\n    function _registerContextEvents(orientation, component) {\n      _contexts[orientation] = component;\n\n      component.on('beforeOpen', function(event) {\n        LayoutPlatform.set(orientation + 'ContextOpened', true);\n\n        LayoutPlatform.fire(orientation + 'ContextOpened', {\n          opened: true,\n          component: component,\n          userBehavior: event.userBehavior\n        });\n\n        _resize(orientation);\n      });\n\n      component.on('beforeCloseContent', function() {\n        var group = $(component.el).find('.pl-group.opened').attr('data-group');\n\n        if (!group) {\n          return;\n        }\n\n        var buttons = LayoutPlatform.get('buttons' + orientation) || [],\n            buttonsEls = LayoutPlatform[orientation + 'GroupedButtons']().childrenRequire,\n            buttonIndex = null;\n\n        for (var i = 0; i < buttons.length; i++) {\n          if (buttons[i].group == group) {\n            buttonIndex = i;\n\n            break;\n          }\n        }\n\n        if (buttonIndex === null || buttonsEls.length <= buttonIndex) {\n          return;\n        }\n\n        for (var i = 0; i < buttonsEls.length; i++) {\n          if ($(buttonsEls[i].el).attr('data-index') == buttonIndex) {\n            buttonsEls[i].set('selected', false);\n\n            break;\n          }\n        }\n\n      });\n\n      component.on('beforeClose', function() {\n        $(component.el).find('.pl-group').removeClass('opened');\n      });\n\n      component.on('close', function(event) {\n        LayoutPlatform.set(orientation + 'ContextOpened', false);\n\n        LayoutPlatform.fire(orientation + 'ContextOpened', {\n          opened: false,\n          component: component,\n          userBehavior: event.userBehavior\n        });\n\n        _resize();\n      });\n\n      component.on('closeIfGroupOpened', function(args) {\n        if (!args || !args.$group) {\n          return;\n        }\n\n        args.$group.removeClass('opened');\n      });\n    }\n\n    function _displayContextGroup(orientation, context, $context, group, $group, userBehavior) {\n      $context.find('.pl-group').removeClass('opened');\n\n      $group.addClass('opened');\n\n      var title = $group.attr('data-title');\n\n      if ($group.attr('data-no-title') == 'true') {\n        LayoutPlatform.set('context' + orientation + 'usetitle', false);\n        LayoutPlatform.set('context' + orientation + 'title', null);\n      }\n      else if (typeof title != 'undefined') {\n        LayoutPlatform.set('context' + orientation + 'usetitle', true);\n        LayoutPlatform.set('context' + orientation + 'title', title);\n      }\n\n      LayoutPlatform.fire('groupOpened', {\n        orientation: orientation,\n        context: context,\n        group: group,\n        $group: $group,\n        userBehavior: userBehavior\n      });\n\n      context.open(null, userBehavior, group);\n    }\n\n    function _beforeButtonsAction(args) {\n      if (!args || !args.button || (!args.button.context && !args.button.group)) {\n        return;\n      }\n\n      if (args.button.group) {\n        var beforeGroup = args.button.beforeGroup || function(context, $group, userBehavior, callback) {\n          callback();\n        };\n\n        ['left', 'right'].forEach(function(orientation) {\n          var context = _contexts[orientation],\n              $context = $(context.el),\n              $group = $context.find('[data-group=\"' + args.button.group + '\"]');\n\n          if (!$group.length) {\n            return;\n          }\n\n          if ($group.hasClass('opened')) {\n            if (args.userBehavior) {\n              return context.close(null, true);\n            }\n\n            args.component.set('selected', true);\n\n            return context.open(null, args.userBehavior, args.button.group);\n          }\n\n          args.component.set('selected', true);\n          args.component.set('loading', true);\n\n          beforeGroup(context, $group, args.userBehavior, function callback() {\n            args.component.set('loading', false);\n\n            if ($group.hasClass('opened')) {\n              return _displayContextGroup(orientation, context, $context, args.button.group, $group, args.userBehavior);\n            }\n\n            if (context.isOpened()) {\n              context.closeContent(function callback() {\n                _displayContextGroup(orientation, context, $context, args.button.group, $group, args.userBehavior);\n              }, args.userBehavior);\n            }\n            else {\n              _displayContextGroup(orientation, context, $context, args.button.group, $group, args.userBehavior);\n            }\n          });\n        });\n      }\n      else if (args.button.context) {\n        var context = _contexts[args.button.context];\n        if (!context) {\n          return;\n        }\n\n        var beforeContext = args.button.beforeContext || function(context, callback) {\n          callback();\n        };\n\n        beforeContext(context, function callback() {\n          context.open(null, args.userBehavior);\n        });\n      }\n    }\n\n    function _beforeButtonsCompact(args) {\n      if (!args || !args.button) {\n        return;\n      }\n\n      if (args.button == _groupedButtons.left) {\n        _groupedButtons.right[args.opened ? 'hide' : 'show']();\n      }\n      else if (args.button == _groupedButtons.right) {\n        _groupedButtons.left[args.opened ? 'hide' : 'show']();\n      }\n    }\n\n    var LayoutPlatform = component({\n          plName: 'pl-layout-platform',\n          data: $.extend(true, {\n            loaded: false,\n            titleShowed: true,\n            titleLeft: 50,\n            titleLeftOffset: -80,\n            titleBgLeftOffset: 0,\n            titleBgWidth: 0,\n            titleBgHeight: 0,\n            buttonsleft: [],\n            buttonsright: [],\n            contextlefttitle: '',\n            contextrighttitle: '',\n            contextleftusetitle: true,\n            contextrightusetitle: true,\n            leftContextWidth: 0,\n            rightContextWidth: 0,\n            leftContextOpened: false,\n            rightContextOpened: false,\n            contentLeft: 0,\n            contentRight: 0,\n            contentMedia: '',\n\n            crossleftcontext: function() {\n              _closeContext('left', true);\n            },\n            crossrightcontext: function() {\n              _closeContext('right', true);\n            }\n          }, data),\n\n          leftGroupedButtons: function() {\n            return _groupedButtons.left;\n          },\n          rightGroupedButtons: function() {\n            return _groupedButtons.right;\n          },\n\n          leftContext: function() {\n            return _contexts.left;\n          },\n          rightContext: function() {\n            return _contexts.right;\n          },\n\n          closeOnNotDesktop: function(groups) {\n            groups = typeof groups == 'string' ? [groups] : groups;\n\n            if (LayoutPlatform.get('screen') != 'screen-desktop') {\n              groups.forEach(function(group) {\n                LayoutPlatform.leftContext().closeIfGroupOpened(group);\n                LayoutPlatform.rightContext().closeIfGroupOpened(group);\n              });\n            }\n          }\n        }),\n        Page = LayoutPlatform.parentRequire,\n        _$el = {\n          window: $(window),\n          platform: $(LayoutPlatform.el),\n          content: $(LayoutPlatform.el).find('.pl-layout-platform-content'),\n          contentTemplate: $(LayoutPlatform.el).find('.pl-layout-platform-content-template')\n        };\n\n    window.Ractive.Plumes.bindUses(LayoutPlatform, ['mask']);\n\n    LayoutPlatform.observe('title-showed', function(value) {\n      value = value === false || value == 'false' ? false : true;\n\n      LayoutPlatform.set('titleShowed', value);\n    });\n\n    _$el.window.resize(_resize);\n\n    LayoutPlatform.on('teardown', function() {\n      _$el.window.off('resize', _resize);\n    });\n\n    _resize();\n\n    function _updateTitlePosition() {\n      if (!_$el.titleText) {\n        return;\n      }\n\n      var width = _$el.titleText.outerWidth(),\n          screen = LayoutPlatform.get('screen');\n\n      LayoutPlatform.set('titleEmpty', !width);\n      LayoutPlatform.set('titleLeft',\n        screen == 'screen-desktop' ? (\n          50 +\n          (LayoutPlatform.get('leftContextOpened') ? 12.5 : 0) -\n          (LayoutPlatform.get('rightContextOpened') ? 12.5 : 0)\n        ) : 50\n      );\n\n      LayoutPlatform.set('titleLeftOffset', !width ? -8 : -(width / 2));\n    }\n\n    function _updateTitleArea(height, open) {\n      LayoutPlatform.set('titleOpened', open);\n\n      if (open) {\n        var titleWidth = _$el.title.outerWidth() + 40;\n        LayoutPlatform.set('titleBgLeftOffset', titleWidth / 2);\n        LayoutPlatform.set('titleBgWidth', titleWidth);\n        LayoutPlatform.set('titleBgHeight', height + 30);\n      }\n      else {\n        LayoutPlatform.set('titleBgLeftOffset', 0);\n        LayoutPlatform.set('titleBgWidth', 0);\n      }\n    }\n\n    LayoutPlatform.on('titleOpen', function(args) {\n      _updateTitleArea(args.height, true);\n    });\n\n    LayoutPlatform.on('titleClose', function(args) {\n      _updateTitleArea(args.height, false);\n\n      setTimeout(_updateTitlePosition, 550);\n    });\n\n    LayoutPlatform.selectApp = function(name, fireFunc, callback) {\n      if (!Title) {\n        return;\n      }\n\n      Title.selectApp(name, fireFunc, callback);\n    };\n\n    LayoutPlatform.addApp = function(app, indexOrPosition) {\n      if (!Title) {\n        return;\n      }\n\n      Title.addTitle(app, indexOrPosition);\n    };\n\n    LayoutPlatform.removeApp = function(name) {\n      if (!Title) {\n        return;\n      }\n\n      Title.removeTitle(name);\n    };\n\n    setTimeout(function() {\n      if (data.onloaded) {\n        data.onloaded(LayoutPlatform);\n      }\n\n      LayoutPlatform.set('loaded', true);\n\n      var beforeRequire = data.beforerequire || function(layout, callback) {\n        callback();\n      };\n\n      beforeRequire(LayoutPlatform, function() {\n        LayoutPlatform.set('beforerequire', null);\n        data.beforerequire = null;\n\n        LayoutPlatform.set('start', true);\n\n        LayoutPlatform.require().then(function() {\n          _registerGroupedButtonsEvents('left', LayoutPlatform.findChild('data-pl-name', 'buttons-left'));\n          _registerGroupedButtonsEvents('right', LayoutPlatform.findChild('data-pl-name', 'buttons-right'));\n\n          _registerContextEvents('left', LayoutPlatform.findChild('data-pl-name', 'context-left'));\n          _registerContextEvents('right', LayoutPlatform.findChild('data-pl-name', 'context-right'));\n\n          Title = LayoutPlatform.findChild('name', 'pl-dropdown-title');\n\n          _$el.title = _$el.platform.find('.pl-layout-title');\n          _$el.titleText = _$el.platform.find('.pl-layout-title h2 span');\n\n          _updateTitlePosition();\n\n          if (Title) {\n            Title.on('open', function(args) {\n              LayoutPlatform.fire('titleOpen', args);\n            });\n\n            Title.on('close', function(args) {\n              LayoutPlatform.fire('titleClose', args);\n            });\n\n            Title.on('titleSelected', function(args) {\n              var cls = Page.get('cls') || [];\n              cls = cls.filter(function(value) {\n                return value.indexOf('app-') !== 0;\n              });\n\n              cls.push('app-' + args.title.name\n                .toLowerCase()\n                .replace(/[^a-z0-9]/gi, '')\n              );\n\n              Page.set('cls', cls);\n            });\n\n            Title.fireSelected();\n          }\n\n          done();\n\n          setTimeout(function() {\n            _$el.platform.find('.pl-layout-mask').remove();\n          });\n        });\n      });\n    });\n  });\n\n})();\n"],"sourceRoot":"/source/"}