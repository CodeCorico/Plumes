{"version":3,"sources":["layouts/pl-layout-platform.js"],"names":["window","Ractive","controller","component","data","el","config","done","_updateTitleAreaHeight","height","LayoutPlateform","set","fire","waiting","sectionsUsed","Title","titleAreaHeight","loaded","i","length","use","plName","Page","parentRequire","on","args","selectApp","name","fireFunc","callback","addApp","app","indexOrPosition","addTitle","removeApp","removeTitle","setTimeout","onloaded","beforeRequire","beforerequire","l","require","then","findChild","cls","get","filter","value","indexOf","push","title","toLowerCase","replace","fireSelected","$","find","remove"],"mappings":"CAAA,WACE,YAEAA,QAAOC,QAAQC,WAAW,qBAAsB,SAASC,EAAWC,EAAMC,EAAIC,EAAQC,GAqBpF,QAASC,GAAuBC,GAC9BA,GAAU,GAEVC,EAAgBC,IAAI,kBAAmBF,GACvCC,EAAgBE,KAAK,0BACnBH,OAAQA,EACRI,QAAS,MA1Bb,GAAIC,IAAgB,WAAY,WAAY,aAAc,UAAW,UAAW,oBAC5EC,EAAQ,IAEZX,GAAKY,gBAAkB,GACvBZ,EAAKa,QAAS,CAEd,KAAK,GAAIC,GAAI,EAAGA,EAAIJ,EAAaK,OAAQD,IAAK,CAC5C,GAAIE,GAAMN,EAAaI,EAEvBd,GAAKgB,GAA2B,mBAAbhB,GAAKgB,IAAsB,EAAOhB,EAAKgB,GAC1DhB,EAAKgB,GAAoB,QAAbhB,EAAKgB,IAAiB,EAAOhB,EAAKgB,GAC9ChB,EAAKgB,GAAoB,SAAbhB,EAAKgB,IAAkB,EAAQhB,EAAKgB,GAGlD,GAAIV,GAAkBP,GAChBkB,OAAQ,sBACRjB,KAAMA,IAERkB,EAAOZ,EAAgBa,aAY3Bb,GAAgBc,GAAG,YAAa,SAASC,GACvCjB,EAAuBiB,EAAKhB,UAG9BC,EAAgBc,GAAG,aAAc,SAASC,GACxCjB,EAAuBiB,EAAKhB,UAG9BC,EAAgBgB,UAAY,SAASC,EAAMC,EAAUC,GAC9Cd,GAILA,EAAMW,UAAUC,EAAMC,EAAUC,IAGlCnB,EAAgBoB,OAAS,SAASC,EAAKC,GAChCjB,GAILA,EAAMkB,SAASF,EAAKC,IAGtBtB,EAAgBwB,UAAY,SAASP,GAC9BZ,GAILA,EAAMoB,YAAYR,IAGpBS,WAAW,WACLhC,EAAKiC,UACPjC,EAAKiC,SAAS3B,GAGhBA,EAAgBC,IAAI,UAAU,EAE9B,IAAI2B,GAAgBlC,EAAKmC,eAAiB,SAASC,EAAGX,GACpDA,IAGFS,GAAc5B,EAAiB,WAC7BA,EAAgBC,IAAI,gBAAiB,MACrCP,EAAKmC,cAAgB,KAErB7B,EAAgBC,IAAI,SAAS,GAE7BD,EAAgB+B,UAAUC,KAAK,WAC7B3B,EAAQL,EAAgBiC,UAAU,OAAQ,qBAEtC5B,IACFA,EAAMS,GAAG,OAAQ,SAASC,GACxBf,EAAgBE,KAAK,YAAaa,KAGpCV,EAAMS,GAAG,QAAS,SAASC,GACzBf,EAAgBE,KAAK,aAAca,KAGrCV,EAAMS,GAAG,gBAAiB,SAASC,GACjC,GAAImB,GAAMtB,EAAKuB,IAAI,UACnBD,GAAMA,EAAIE,OAAO,SAASC,GACxB,MAAiC,KAA1BA,EAAMC,QAAQ,UAGvBJ,EAAIK,KAAK,OAASxB,EAAKyB,MAAMvB,KAC1BwB,cACAC,QAAQ,cAAe,KAG1B9B,EAAKX,IAAI,MAAOiC,KAGlB7B,EAAMsC,gBAGR9C,IAEA6B,WAAW,WACTkB,EAAE5C,EAAgBL,IAAIkD,KAAK,mBAAmBC","file":"layouts/pl-layout-platform.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  window.Ractive.controller('pl-layout-platform', function(component, data, el, config, done) {\n    var sectionsUsed = ['usebrand', 'usetitle', 'useprofile', 'usehelp', 'usemask', 'usenotifications'],\n        Title = null;\n\n    data.titleAreaHeight = 90;\n    data.loaded = false;\n\n    for (var i = 0; i < sectionsUsed.length; i++) {\n      var use = sectionsUsed[i];\n\n      data[use] = typeof data[use] == 'undefined' ? true : data[use];\n      data[use] = data[use] == 'true' ? true : data[use];\n      data[use] = data[use] == 'false' ? false : data[use];\n    }\n\n    var LayoutPlateform = component({\n          plName: 'pl-layout-plateform',\n          data: data\n        }),\n        Page = LayoutPlateform.parentRequire;\n\n    function _updateTitleAreaHeight(height) {\n      height += 50;\n\n      LayoutPlateform.set('titleAreaHeight', height);\n      LayoutPlateform.fire('titleAreaHeightChanged', {\n        height: height,\n        waiting: 550\n      });\n    }\n\n    LayoutPlateform.on('titleOpen', function(args) {\n      _updateTitleAreaHeight(args.height);\n    });\n\n    LayoutPlateform.on('titleClose', function(args) {\n      _updateTitleAreaHeight(args.height);\n    });\n\n    LayoutPlateform.selectApp = function(name, fireFunc, callback) {\n      if (!Title) {\n        return;\n      }\n\n      Title.selectApp(name, fireFunc, callback);\n    };\n\n    LayoutPlateform.addApp = function(app, indexOrPosition) {\n      if (!Title) {\n        return;\n      }\n\n      Title.addTitle(app, indexOrPosition);\n    };\n\n    LayoutPlateform.removeApp = function(name) {\n      if (!Title) {\n        return;\n      }\n\n      Title.removeTitle(name);\n    };\n\n    setTimeout(function() {\n      if (data.onloaded) {\n        data.onloaded(LayoutPlateform);\n      }\n\n      LayoutPlateform.set('loaded', true);\n\n      var beforeRequire = data.beforerequire || function(l, callback) {\n        callback();\n      };\n\n      beforeRequire(LayoutPlateform, function() {\n        LayoutPlateform.set('beforerequire', null);\n        data.beforerequire = null;\n\n        LayoutPlateform.set('start', true);\n\n        LayoutPlateform.require().then(function() {\n          Title = LayoutPlateform.findChild('name', 'pl-dropdown-title');\n\n          if (Title) {\n            Title.on('open', function(args) {\n              LayoutPlateform.fire('titleOpen', args);\n            });\n\n            Title.on('close', function(args) {\n              LayoutPlateform.fire('titleClose', args);\n            });\n\n            Title.on('titleSelected', function(args) {\n              var cls = Page.get('cls') || [];\n              cls = cls.filter(function(value) {\n                return value.indexOf('app-') !== 0;\n              });\n\n              cls.push('app-' + args.title.name\n                .toLowerCase()\n                .replace(/[^a-z0-9]/gi, '')\n              );\n\n              Page.set('cls', cls);\n            });\n\n            Title.fireSelected();\n          }\n\n          done();\n\n          setTimeout(function() {\n            $(LayoutPlateform.el).find('.pl-layout-mask').remove();\n          });\n        });\n      });\n    });\n  });\n\n})();\n"],"sourceRoot":"/source/"}