{"version":3,"sources":["layouts/pl-layout-notifications.js"],"names":["window","Ractive","controller","component","data","el","config","done","_close","layoutNotifications","close","title","nonotification","signoutlabel","emailslabel","_$el","body","$","plName","extend","opened","notifications","emailstoggle","event","isOn","original","stopPropagation","emailsToggleFunc","get","pushNotification","content","time","picture","args","this","unshift","set","toggle","fire","open","isToggled","on","signout","openitem","unbind","click","require","then"],"mappings":"CAAA,WACE,YAEAA,QAAOC,QAAQC,WAAW,0BAA2B,SAASC,EAAWC,EAAMC,EAAIC,EAAQC,GA0EzF,QAASC,KACPC,EAAoBC,QAzEtBN,EAAKO,MAAqC,mBAAtBP,GAAK,cAA+B,gBAAkBA,EAAK,cAC/EA,EAAKQ,eAAuD,mBAA/BR,GAAK,uBAAwC,uBAAyBA,EAAK,uBACxGA,EAAKS,aAAmD,mBAA7BT,GAAK,qBAAsC,UAAYA,EAAK,qBACvFA,EAAKU,YAAiD,mBAA5BV,GAAK,oBAAqC,SAAWA,EAAK,mBAEpF,IAAIW,IACEC,KAAMC,EAAE,SAEVR,EAAsBN,GACpBe,OAAQ,oBACRd,KAAMa,EAAEE,QAAO,GACbC,QAAQ,EACRC,iBACAC,aAAc,SAASC,EAAOC,GAC5BD,EAAME,SAASC,iBAEf,IAAIC,GAAmBlB,EAAoBmB,IAAI,gBAC3CD,IACFA,EAAiBJ,EAAOC,KAG3BpB,GAEHyB,iBAAkB,SAASC,EAASC,EAAMC,EAASC,GACjD,GAAIZ,GAAgBa,KAAKN,IAAI,gBAC7BP,GAAgBA,MAEhBA,EAAcc,SACZH,QAASA,EACTD,KAAMA,EACND,QAASA,EACTG,KAAMA,GAAQ,OAEhBC,KAAKE,IAAI,gBAAiBf,IAE5BgB,OAAQ,WACNH,KAAKE,IAAI,UAAWF,KAAKN,IAAI,WAC7BM,KAAKI,KAAK,WAEZC,KAAM,WACJL,KAAKE,IAAI,UAAU,GACnBF,KAAKI,KAAK,WAEZ5B,MAAO,WACLwB,KAAKE,IAAI,UAAU,GACnBF,KAAKI,KAAK,WAEZE,UAAW,WACT,MAAON,MAAKN,IAAI,YAIpBxB,GAAKiC,QACP5B,EAAoBgC,GAAG,SAAU,SAASlB,GACxCnB,EAAKiC,OAAOd,EAAOd,EAAoBmB,IAAI,aAI3CxB,EAAKsC,SACPjC,EAAoBgC,GAAG,UAAW,SAASlB,GACzCnB,EAAKsC,QAAQnB,GACbA,EAAME,SAASC,oBAIftB,EAAKuC,UACPlC,EAAoBgC,GAAG,WAAY,SAASlB,GAC1CnB,EAAKuC,SAASpB,GACdA,EAAME,SAASC,oBAQnBjB,EAAoBgC,GAAG,WAAY,WACjC1B,EAAKC,KAAK4B,OAAO,QAASpC,KAG5BO,EAAKC,KAAK6B,MAAMrC,GAEhBC,EAAoBqC,UAAUC,KAAKxC","file":"layouts/pl-layout-notifications.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  window.Ractive.controller('pl-layout-notifications', function(component, data, el, config, done) {\n\n    data.title = typeof data['text-title'] == 'undefined' ? 'notifications' : data['text-title'];\n    data.nonotification = typeof data['text-nonotification'] == 'undefined' ? 'No new notification.' : data['text-nonotification'];\n    data.signoutlabel = typeof data['text-signoutlabel'] == 'undefined' ? 'signout' : data['text-signoutlabel'];\n    data.emailslabel = typeof data['text-emailslabel'] == 'undefined' ? 'emails' : data['text-emailslabel'];\n\n    var _$el = {\n          body: $('body')\n        },\n        layoutNotifications = component({\n          plName: 'pl-button-profile',\n          data: $.extend(true, {\n            opened: false,\n            notifications: [],\n            emailstoggle: function(event, isOn) {\n              event.original.stopPropagation();\n\n              var emailsToggleFunc = layoutNotifications.get('emails-toggle');\n              if (emailsToggleFunc) {\n                emailsToggleFunc(event, isOn);\n              }\n            }\n          }, data),\n\n          pushNotification: function(content, time, picture, args) {\n            var notifications = this.get('notifications');\n            notifications = notifications || [];\n\n            notifications.unshift({\n              picture: picture,\n              time: time,\n              content: content,\n              args: args || null\n            });\n            this.set('notifications', notifications);\n          },\n          toggle: function() {\n            this.set('opened', !this.get('opened'));\n            this.fire('toggle');\n          },\n          open: function() {\n            this.set('opened', true);\n            this.fire('toggle');\n          },\n          close: function() {\n            this.set('opened', false);\n            this.fire('toggle');\n          },\n          isToggled: function() {\n            return this.get('opened');\n          }\n        });\n\n    if (data.toggle) {\n      layoutNotifications.on('toggle', function(event) {\n        data.toggle(event, layoutNotifications.get('opened'));\n      });\n    }\n\n    if (data.signout) {\n      layoutNotifications.on('signout', function(event) {\n        data.signout(event);\n        event.original.stopPropagation();\n      });\n    }\n\n    if (data.openitem) {\n      layoutNotifications.on('openitem', function(event) {\n        data.openitem(event);\n        event.original.stopPropagation();\n      });\n    }\n\n    function _close() {\n      layoutNotifications.close();\n    }\n\n    layoutNotifications.on('teardown', function() {\n      _$el.body.unbind('click', _close);\n    });\n\n    _$el.body.click(_close);\n\n    layoutNotifications.require().then(done);\n  });\n\n})();\n"],"sourceRoot":"/source/"}