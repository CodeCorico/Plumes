!function(){"use strict";window.Ractive.controller("pl-layout-platform",function(t,e,n,o,i){function l(t){var e=O.window.width();e>=u.DESKTOP?(x.set("leftContextWidth",x.get("leftContextOpened")?"25%":0),x.set("rightContextWidth",x.get("rightContextOpened")?"25%":0),x.set("contentLeft",x.get("leftContextOpened")?"25%":0),x.set("contentRight",x.get("rightContextOpened")?"25%":0),x.set("screen","screen-desktop")):("left"==t&&x.get("rightContextOpened")?(h.right.close(),x.set("rightContextOpened",!1)):"right"==t&&x.get("leftContextOpened")?(h.left.close(),x.set("leftContextOpened",!1)):x.get("leftContextOpened")&&x.get("rightContextOpened")&&(h.right.close(),x.set("rightContextOpened",!1)),e>=u.TABLET?(x.set("leftContextWidth",x.get("leftContextOpened")?"75%":0),x.set("rightContextWidth",x.get("rightContextOpened")?"75%":0),x.set("contentLeft",x.get("leftContextOpened")?"75%":x.get("rightContextOpened")?"-75%":0),x.set("contentRight",x.get("rightContextOpened")?"75%":x.get("leftContextOpened")?"-75%":0),x.set("screen","screen-tablet")):e>=u.MOBILE&&(x.set("leftContextWidth",x.get("leftContextOpened")?"100%":0),x.set("rightContextWidth",x.get("rightContextOpened")?"100%":0),x.set("contentLeft",0),x.set("contentRight",0),x.set("screen","screen-mobile")));var n=O.contentTemplate.outerWidth();n>=u.DESKTOP?(x.set("contentMedia","media-desktop"),x.fire("view","DESKTOP")):n>=u.TABLET?(x.set("contentMedia","media-tablet"),x.fire("view","TABLET")):n>=u.MOBILE&&(x.set("contentMedia","media-mobile"),x.fire("view","MOBILE"))}function f(t){var e=x.findChild("data-pl-name","context-"+t);e.close()}function r(t,e){e.on("beforeAction",c)}function d(t,e){h[t]=e,e.on("beforeOpen",function(){x.set(t+"ContextOpened",!0),l(t)}),e.on("close",function(){x.set(t+"ContextOpened",!1),l()})}function s(t,e,n,o){n.find(".pl-group").removeClass("opened"),o.addClass("opened");var i=o.attr("data-title");"undefined"!=typeof i&&x.set("context"+t+"title",i),e.open()}function c(t){if(t&&t.button&&(t.button.context||t.button.group))if(t.button.group){var e=t.button.beforeGroup||function(t,e,n){n()};["left","right"].forEach(function(n){var o=h[n],i=$(o.el),l=i.find('[data-group="'+t.button.group+'"]');if(l.length)return l.hasClass("opened")?o.open():void e(o,l,function(){o.isOpened()?o.closeContent(function(){s(n,o,i,l)}):s(n,o,i,l)})})}else if(t.button.context){var n=h[t.button.context];if(!n)return;var o=t.button.beforeContext||function(t){t()};o(n,function(){n.open()})}}function a(){x.set("titleLeftOffset",O.titleText.outerWidth()/2)}function p(t,e){if(x.set("titleOpened",e),e){var n=O.title.outerWidth()+40;x.set("titleBgLeftOffset",n/2),x.set("titleBgWidth",n),x.set("titleBgHeight",t+30)}else x.set("titleBgLeftOffset",0),x.set("titleBgWidth",0)}var u={DESKTOP:1e3,TABLET:450,MOBILE:0},g=null,h={left:null,right:null},x=t({plName:"pl-layout-platform",data:$.extend(!0,{loaded:!1,titleLeftOffset:-80,titleBgLeftOffset:0,titleBgWidth:0,titleBgHeight:0,buttonsleft:[],buttonsright:[],contextlefttitle:"",contextrighttitle:"",contextleftusetitle:!0,contextrightusetitle:!0,contextleftscrollbar:!0,contextrightscrollbar:!0,leftContextWidth:0,rightContextWidth:0,leftContextOpened:!1,rightContextOpened:!1,contentLeft:0,contentRight:0,contentMedia:"",crossleftcontext:function(){f("left")},crossrightcontext:function(){f("right")}},e)}),C=x.parentRequire,O={window:$(window),platform:$(x.el),content:$(x.el).find(".pl-layout-platform-content"),contentTemplate:$(x.el).find(".pl-layout-platform-content-template")};window.Ractive.bindUses(x,["mask"]),O.window.resize(l),x.on("teardown",function(){O.window.off("resize",l)}),l(),x.on("titleOpen",function(t){p(t.height,!0)}),x.on("titleClose",function(t){p(t.height,!1),setTimeout(a,550)}),x.selectApp=function(t,e,n){g&&g.selectApp(t,e,n)},x.addApp=function(t,e){g&&g.addTitle(t,e)},x.removeApp=function(t){g&&g.removeTitle(t)},setTimeout(function(){e.onloaded&&e.onloaded(x),x.set("loaded",!0);var t=e.beforerequire||function(t,e){e()};t(x,function(){x.set("beforerequire",null),e.beforerequire=null,x.set("start",!0),x.require().then(function(){r("left",x.findChild("data-pl-name","buttons-left")),r("right",x.findChild("data-pl-name","buttons-right")),d("left",x.findChild("data-pl-name","context-left")),d("right",x.findChild("data-pl-name","context-right")),g=x.findChild("name","pl-dropdown-title"),O.title=O.platform.find(".pl-layout-title"),O.titleText=O.platform.find(".pl-layout-title h2 span"),a(),g&&(g.on("open",function(t){x.fire("titleOpen",t)}),g.on("close",function(t){x.fire("titleClose",t)}),g.on("titleSelected",function(t){var e=C.get("cls")||[];e=e.filter(function(t){return 0!==t.indexOf("app-")}),e.push("app-"+t.title.name.toLowerCase().replace(/[^a-z0-9]/gi,"")),C.set("cls",e)}),g.fireSelected()),i(),setTimeout(function(){O.platform.find(".pl-layout-mask").remove()})})})})})}();
//# sourceMappingURL=pl-layout-platform.min.js.map
