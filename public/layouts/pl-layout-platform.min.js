!function(){"use strict";window.Ractive.controller("pl-layout-platform",function(t,e,n,o,i){function l(t){var e=b.window.width(),n=O.get("screen"),o=O.get("contentMedia");e>=g.DESKTOP?(O.set("leftContextWidth",O.get("leftContextOpened")?"25%":0),O.set("rightContextWidth",O.get("rightContextOpened")?"25%":0),O.set("contentLeft",O.get("leftContextOpened")?"25%":0),O.set("contentRight",O.get("rightContextOpened")?"25%":0),x.left&&x.left.defaultMode(),x.right&&x.right.defaultMode(),O.set("screen","screen-desktop")):("left"==t&&O.get("rightContextOpened")?(C.right.close(),O.set("rightContextOpened",!1)):"right"==t&&O.get("leftContextOpened")?(C.left.close(),O.set("leftContextOpened",!1)):O.get("leftContextOpened")&&O.get("rightContextOpened")&&(C.right.close(),O.set("rightContextOpened",!1)),e>=g.TABLET?(O.set("leftContextWidth",O.get("leftContextOpened")?"75%":0),O.set("rightContextWidth",O.get("rightContextOpened")?"75%":0),O.set("contentLeft",O.get("leftContextOpened")?"75%":O.get("rightContextOpened")?"-75%":0),O.set("contentRight",O.get("rightContextOpened")?"75%":O.get("leftContextOpened")?"-75%":0),x.left&&x.left.defaultMode(),x.right&&x.right.defaultMode(),O.set("screen","screen-tablet")):e>=g.MOBILE&&(O.set("leftContextWidth",O.get("leftContextOpened")?"100%":0),O.set("rightContextWidth",O.get("rightContextOpened")?"100%":0),O.set("contentLeft",0),O.set("contentRight",0),x.left&&x.left.compactMode(),x.right&&x.right.compactMode(),O.set("screen","screen-mobile")));var i=b.contentTemplate.outerWidth();i>=g.DESKTOP?O.set("contentMedia","media-desktop"):i>=g.TABLET?O.set("contentMedia","media-tablet"):i>=g.MOBILE&&O.set("contentMedia","media-mobile"),a(),n!=O.get("screen")&&(O.fire("screen",{screen:O.get("screen")}),setTimeout(function(){O.fire("afterScreen",{screen:O.get("screen")})},250)),o!=O.get("contentMedia")&&(O.fire("contentMedia",{contentMedia:O.get("contentMedia")}),setTimeout(function(){O.fire("afterContentMedia",{contentMedia:O.get("contentMedia")})},250)),O.fire("resize"),setTimeout(function(){O.fire("afterResize")},250)}function f(t){var e=O.findChild("data-pl-name","context-"+t);e.close()}function r(t,e){x[t]=e,e.on("beforeAction",s),e.on("beforeCompact",u),l(),x[t].show()}function d(t,e){C[t]=e,e.on("beforeOpen",function(){O.set(t+"ContextOpened",!0),O.fire(t+"ContextOpened",{opened:!0,component:e}),l(t)}),e.on("close",function(){O.set(t+"ContextOpened",!1),O.fire(t+"ContextOpened",{opened:!1,component:e}),l()}),e.on("closeIfGroupOpened",function(t){t&&t.$group&&t.$group.removeClass("opened")})}function c(t,e,n,o){n.find(".pl-group").removeClass("opened"),o.addClass("opened");var i=o.attr("data-title");"true"==o.attr("data-no-title")?(O.set("context"+t+"usetitle",!1),O.set("context"+t+"title",null)):"undefined"!=typeof i&&(O.set("context"+t+"usetitle",!0),O.set("context"+t+"title",i)),O.fire("groupOpened",{orientation:t,context:e,$group:o}),e.open()}function s(t){if(t&&t.button&&(t.button.context||t.button.group))if(t.button.group){var e=t.button.beforeGroup||function(t,e,n){n()};["left","right"].forEach(function(n){var o=C[n],i=$(o.el),l=i.find('[data-group="'+t.button.group+'"]');if(l.length)return l.hasClass("opened")?o.open():void e(o,l,function(){o.isOpened()?o.closeContent(function(){c(n,o,i,l)}):c(n,o,i,l)})})}else if(t.button.context){var n=C[t.button.context];if(!n)return;var o=t.button.beforeContext||function(t){t()};o(n,function(){n.open()})}}function u(t){t&&t.button&&(t.button==x.left?x.right[t.opened?"hide":"show"]():t.button==x.right&&x.left[t.opened?"hide":"show"]())}function a(){if(b.titleText){var t=b.titleText.outerWidth(),e=O.get("screen");O.set("titleEmpty",!t),O.set("titleLeft","screen-desktop"==e?50+(O.get("leftContextOpened")?12.5:0)-(O.get("rightContextOpened")?12.5:0):50),O.set("titleLeftOffset",t?-(t/2):-8)}}function p(t,e){if(O.set("titleOpened",e),e){var n=b.title.outerWidth()+40;O.set("titleBgLeftOffset",n/2),O.set("titleBgWidth",n),O.set("titleBgHeight",t+30)}else O.set("titleBgLeftOffset",0),O.set("titleBgWidth",0)}var g={DESKTOP:1e3,TABLET:450,MOBILE:0},h=null,x={left:null,right:null},C={left:null,right:null},O=t({plName:"pl-layout-platform",data:$.extend(!0,{loaded:!1,titleShowed:!0,titleLeft:50,titleLeftOffset:-80,titleBgLeftOffset:0,titleBgWidth:0,titleBgHeight:0,buttonsleft:[],buttonsright:[],contextlefttitle:"",contextrighttitle:"",contextleftusetitle:!0,contextrightusetitle:!0,leftContextWidth:0,rightContextWidth:0,leftContextOpened:!1,rightContextOpened:!1,contentLeft:0,contentRight:0,contentMedia:"",crossleftcontext:function(){f("left")},crossrightcontext:function(){f("right")}},e),leftGroupedButtons:function(){return x.left},rightGroupedButtons:function(){return x.right},leftContext:function(){return C.left},rightContext:function(){return C.right}}),m=O.parentRequire,b={window:$(window),platform:$(O.el),content:$(O.el).find(".pl-layout-platform-content"),contentTemplate:$(O.el).find(".pl-layout-platform-content-template")};window.Ractive.bindUses(O,["mask"]),O.observe("title-showed",function(t){t=t===!1||"false"==t?!1:!0,O.set("titleShowed",t)}),b.window.resize(l),O.on("teardown",function(){b.window.off("resize",l)}),l(),O.on("titleOpen",function(t){p(t.height,!0)}),O.on("titleClose",function(t){p(t.height,!1),setTimeout(a,550)}),O.selectApp=function(t,e,n){h&&h.selectApp(t,e,n)},O.addApp=function(t,e){h&&h.addTitle(t,e)},O.removeApp=function(t){h&&h.removeTitle(t)},setTimeout(function(){e.onloaded&&e.onloaded(O),O.set("loaded",!0);var t=e.beforerequire||function(t,e){e()};t(O,function(){O.set("beforerequire",null),e.beforerequire=null,O.set("start",!0),O.require().then(function(){r("left",O.findChild("data-pl-name","buttons-left")),r("right",O.findChild("data-pl-name","buttons-right")),d("left",O.findChild("data-pl-name","context-left")),d("right",O.findChild("data-pl-name","context-right")),h=O.findChild("name","pl-dropdown-title"),b.title=b.platform.find(".pl-layout-title"),b.titleText=b.platform.find(".pl-layout-title h2 span"),a(),h&&(h.on("open",function(t){O.fire("titleOpen",t)}),h.on("close",function(t){O.fire("titleClose",t)}),h.on("titleSelected",function(t){var e=m.get("cls")||[];e=e.filter(function(t){return 0!==t.indexOf("app-")}),e.push("app-"+t.title.name.toLowerCase().replace(/[^a-z0-9]/gi,"")),m.set("cls",e)}),h.fireSelected()),i(),setTimeout(function(){b.platform.find(".pl-layout-mask").remove()})})})})})}();
//# sourceMappingURL=pl-layout-platform.min.js.map
