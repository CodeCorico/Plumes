{"version":3,"sources":["context-panel/pl-context-panel.js"],"names":["window","Ractive","controller","component","data","el","config","done","_sections","$selector","_$el","panel","find","length","_inOpen","ContextPanel","plName","$","extend","opened","usable","open","callback","userBehavior","fire","set","setTimeout","$sections","each","i","$section","this","addClass","closeContent","removeClass","close","withoutCloseContent","groupOpened","groupName","$group","attr","isGroupOpened","closeIfGroupOpened","isOpened","get","Plumes","bindUses","on","event","oncross","require","then"],"mappings":"CAAA,WACE,YAEAA,QAAOC,QAAQC,WAAW,mBAAoB,SAASC,EAAWC,EAAMC,EAAIC,EAAQC,GAElF,QAASC,KACP,GAAIC,GAAYC,EAAKC,MAAMC,KAAK,YAEhC,OAAOH,GAAUI,OAASH,EAAKC,MAAMC,KAAK,yDAA2DF,EAAKC,MAAMC,KAAK,eAGvH,GAAIE,IAAU,EACVC,EAAeZ,GACba,OAAQ,mBACRZ,KAAMa,EAAEC,QAAO,GACbC,QAAQ,EACRC,QAAQ,GACPhB,GAEHiB,KAAM,SAASC,EAAUC,GACvBA,IAAsC,mBAAhBA,KAA+BA,GAErDT,GAAU,EAEVC,EAAaS,KAAK,cAChBD,aAAcA,IAGhBR,EAAaU,IAAI,UAAU,GAE3BC,WAAW,WACT,GAAKZ,EAAL,CAIA,GAAIa,GAAYnB,GAEhBmB,GAAUC,KAAK,SAASC,GACtB,GAAIC,GAAWb,EAAEc,KAEjBL,YAAW,WACJZ,GAILgB,EAASE,SAAS,WACb,GAAJH,KAGLH,WAAW,WACJZ,IAILC,EAAaU,IAAI,UAAU,GAE3BV,EAAaS,KAAK,QAChBD,aAAcA,IAGZD,GACFA,MAEyB,IAAxBK,EAAUd,OAAS,GAAW,OAClC,MAGLoB,aAAc,SAASX,EAAUC,GAC/BA,IAAsC,mBAAhBA,KAA+BA,GAErDT,GAAU,EAEVC,EAAaS,KAAK,sBAChBD,aAAcA,IAGhBR,EAAaU,IAAI,UAAU,EAE3B,IAAIE,GAAYnB,GAEhBmB,GAAUC,KAAK,SAASC,GACtB,GAAIC,GAAWb,EAAEc,KAEjBL,YAAW,WACLZ,GAIJgB,EAASI,YAAY,WACS,IAA5BP,EAAUd,OAAS,EAAIgB,MAG7BH,WAAW,WACLZ,IAIJC,EAAaS,KAAK,gBAChBD,aAAcA,IAGZD,GACFA,MAEyB,IAAxBK,EAAUd,OAAS,GAAW,MAGrCsB,MAAO,SAASb,EAAUC,EAAca,GAItC,MAHAb,KAAsC,mBAAhBA,KAA+BA,IACrDa,EAAsBA,IAAuB,IAU7CrB,EAAaS,KAAK,eAChBD,aAAcA,IAGhBR,EAAaU,IAAI,UAAU,OAE3BC,YAAW,WACLZ,IAIJC,EAAaS,KAAK,SAChBD,aAAcA,IAGZD,GACFA,MAED,UAzBDS,MAAKE,aAAa,WAChBlB,EAAaoB,MAAMb,EAAUC,GAAc,IAC1CA,IA0BPc,YAAa,SAASC,GACpB,GAAIC,GAAS,IAUb,OARA7B,GAAKC,MAAMC,KAAK,oBAAoBgB,KAAK,WACvC,GAAIX,EAAEc,MAAMS,KAAK,eAAiBF,EAGhC,MAFAC,GAAStB,EAAEc,OAEJ,IAIJQ,GAGTE,cAAe,SAASH,GACtB,QAASP,KAAKM,YAAYC,IAG5BI,mBAAoB,SAASJ,GAC3B,GAAIC,GAASR,KAAKM,YAAYC,EAE1BC,IACFxB,EAAaoB,MAAM,WACjBpB,EAAaS,KAAK,sBAChBe,OAAQA,EACRhB,cAAc,MAEf,IAIPoB,SAAU,WACR,MAAO5B,GAAa6B,IAAI,aAG5BlC,GACEC,MAAOM,EAAEF,EAAaV,IAG5BL,QAAOC,QAAQ4C,OAAOC,SACpB/B,GACC,QAAS,YAAa,eACtB,YAAa,eAGhBA,EAAagC,GAAG,QAAS,SAASC,GAChC,GAAIC,GAAUlC,EAAa6B,IAAI,WAE3BK,IACFA,EAAQD,KAIZjC,EAAamC,UAAUC,KAAK5C","file":"context-panel/pl-context-panel.min.js","sourcesContent":["(function() {\n  'use strict';\n\n  window.Ractive.controller('pl-context-panel', function(component, data, el, config, done) {\n\n    function _sections() {\n      var $selector = _$el.panel.find('.pl-group');\n\n      return $selector.length ? _$el.panel.find('.pl-context-panel-title, .pl-group.opened .pl-section') : _$el.panel.find('.pl-section');\n    }\n\n    var _inOpen = false,\n        ContextPanel = component({\n          plName: 'pl-context-panel',\n          data: $.extend(true, {\n            opened: false,\n            usable: false\n          }, data),\n\n          open: function(callback, userBehavior) {\n            userBehavior = typeof userBehavior == 'undefined' || userBehavior ? true : false;\n\n            _inOpen = true;\n\n            ContextPanel.fire('beforeOpen', {\n              userBehavior: userBehavior\n            });\n\n            ContextPanel.set('opened', true);\n\n            setTimeout(function() {\n              if (!_inOpen) {\n                return;\n              }\n\n              var $sections = _sections();\n\n              $sections.each(function(i) {\n                var $section = $(this);\n\n                setTimeout(function() {\n                  if (!_inOpen) {\n                    return;\n                  }\n\n                  $section.addClass('opened');\n                }, i * 80);\n              });\n\n              setTimeout(function() {\n                if (!_inOpen) {\n                  return;\n                }\n\n                ContextPanel.set('usable', true);\n\n                ContextPanel.fire('open', {\n                  userBehavior: userBehavior\n                });\n\n                if (callback) {\n                  callback();\n                }\n              }, (($sections.length - 1) * 80) + 450);\n            }, 250);\n          },\n\n          closeContent: function(callback, userBehavior) {\n            userBehavior = typeof userBehavior == 'undefined' || userBehavior ? true : false;\n\n            _inOpen = false;\n\n            ContextPanel.fire('beforeCloseContent', {\n              userBehavior: userBehavior\n            });\n\n            ContextPanel.set('usable', false);\n\n            var $sections = _sections();\n\n            $sections.each(function(i) {\n              var $section = $(this);\n\n              setTimeout(function() {\n                if (_inOpen) {\n                  return;\n                }\n\n                $section.removeClass('opened');\n              }, ($sections.length - 1 - i) * 80);\n            });\n\n            setTimeout(function() {\n              if (_inOpen) {\n                return;\n              }\n\n              ContextPanel.fire('closeContent', {\n                userBehavior: userBehavior\n              });\n\n              if (callback) {\n                callback();\n              }\n            }, (($sections.length - 1) * 80) + 450);\n          },\n\n          close: function(callback, userBehavior, withoutCloseContent) {\n            userBehavior = typeof userBehavior == 'undefined' || userBehavior ? true : false;\n            withoutCloseContent = withoutCloseContent || false;\n\n            if (!withoutCloseContent) {\n              this.closeContent(function() {\n                ContextPanel.close(callback, userBehavior, true);\n              }, userBehavior);\n\n              return;\n            }\n\n            ContextPanel.fire('beforeClose', {\n              userBehavior: userBehavior\n            });\n\n            ContextPanel.set('opened', false);\n\n            setTimeout(function() {\n              if (_inOpen) {\n                return;\n              }\n\n              ContextPanel.fire('close', {\n                userBehavior: userBehavior\n              });\n\n              if (callback) {\n                callback();\n              }\n            }, 250);\n          },\n\n          groupOpened: function(groupName) {\n            var $group = null;\n\n            _$el.panel.find('.pl-group.opened').each(function() {\n              if ($(this).attr('data-group') == groupName) {\n                $group = $(this);\n\n                return false;\n              }\n            });\n\n            return $group;\n          },\n\n          isGroupOpened: function(groupName) {\n            return !!this.groupOpened(groupName);\n          },\n\n          closeIfGroupOpened: function(groupName) {\n            var $group = this.groupOpened(groupName);\n\n            if ($group) {\n              ContextPanel.close(function() {\n                ContextPanel.fire('closeIfGroupOpened', {\n                  $group: $group,\n                  userBehavior: false\n                });\n              }, false);\n            }\n          },\n\n          isOpened: function() {\n            return ContextPanel.get('opened');\n          }\n        }),\n        _$el = {\n          panel: $(ContextPanel.el)\n        };\n\n    window.Ractive.Plumes.bindUses(\n      ContextPanel,\n      ['title', 'leftcross', 'rightcross'],\n      ['leftcross', 'rightcross']\n    );\n\n    ContextPanel.on('cross', function(event) {\n      var oncross = ContextPanel.get('on-cross');\n\n      if (oncross) {\n        oncross(event);\n      }\n    });\n\n    ContextPanel.require().then(done);\n  });\n})();\n"],"sourceRoot":"/source/"}